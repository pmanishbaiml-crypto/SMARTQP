<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8" />
    <title>Dashboard – SmartQPGen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>

<body class="flex min-h-screen h-full">

    <aside id="sidebar" class="sidebar flex flex-col shadow-lg">
        <div class="py-3 px-6 flex items-center justify-between border-b border-gray-700">
            <button id="sidebar-toggle-desktop"
                class="hidden md:block text-gray-300 hover:text-white focus:outline-none mr-3">
                <i class="fas fa-bars text-xl"></i>
            </button>
            <span class="text-2xl font-bold flex-grow">SmartQPGen</span>
            <button id="sidebar-toggle-close-mobile"
                class="md:hidden text-gray-300 hover:text-white focus:outline-none">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <div class="p-4">
            <button id="new-qp-btn"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md flex items-center justify-center space-x-2 transition duration-200">
                <i class="fas fa-plus"></i>
                <span>New Question Paper</span>
            </button>
        </div>

        <nav class="flex-grow px-6 py-2 space-y-2">
            <a href="#" id="nav-dashboard"
                class="flex items-center p-2 text-base font-medium rounded-lg hover:bg-gray-700 transition duration-200">
                <i class="fas fa-th-large w-5 h-5 mr-3"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" id="nav-requirements"
                class="flex items-center p-2 text-base font-medium rounded-lg hover:bg-gray-700 transition duration-200">
                <i class="fas fa-clipboard-list w-5 h-5 mr-3"></i>
                <span>Requirements for QP</span>
            </a>
            <a href="#" id="nav-saved"
                class="flex items-center p-2 text-base font-medium rounded-lg hover:bg-gray-700 transition duration-200">
                <i class="fas fa-save w-5 h-5 mr-3"></i>
                <span>Saved QPs & Banks</span>
            </a>
            <a href="#" id="nav-recent"
                class="flex items-center p-2 text-base font-medium rounded-lg hover:bg-gray-700 transition duration-200">
                <i class="fas fa-history w-5 h-5 mr-3"></i>
                <span>Recent Generated QPs</span>
            </a>
        </nav>

        <div class="px-6 py-2 border-t border-gray-700 space-y-2">
            <a href="#" id="nav-settings"
                class="flex items-center p-2 text-base font-medium rounded-lg hover:bg-gray-700 transition duration-200">
                <i class="fas fa-cog w-5 h-5 mr-3"></i>
                <span>Settings</span>
            </a>
            <a href="#" id="nav-help"
                class="flex items-center p-2 text-base font-medium rounded-lg hover:bg-gray-700 transition duration-200">
                <i class="fas fa-question-circle w-5 h-5 mr-3"></i>
                <span>Help</span>
            </a>


        </div>
    </aside>

    <div id="main-content-wrapper" class="main-content-wrapper flex-grow flex flex-col h-full">
        <header
            class="backdrop-blur-md shadow-sm p-4 flex justify-between items-center border-b border-gray-200 sticky top-0 z-30">
            <button id="sidebar-toggle-open-mobile"
                class="md:hidden text-gray-700 hover:text-gray-900 focus:outline-none">
                <i class="fas fa-bars text-xl"></i>
            </button>
            <h1 id="current-view-title" class="text-xl font-semibold px-6 md:px-0 md:text-left">Dashboard</h1>
            <div class="relative ml-auto">
                <button id="account-menu-btn" type="button"
                    class="flex items-center space-x-2 text-gray-700 hover:text-gray-900 focus:outline-none">
                    <div id="account-avatar-circle" class="account-avatar-circle border-blue-500 bg-blue-600">
                        <span id="account-initial">U</span>
                    </div>
                    <i class="fas fa-chevron-down text-xs"></i>
                </button>

                <div id="account-dropdown"
                    class="absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                    <div class="px-4 py-2 text-sm border-b border-gray-200">
                        <p id="dropdown-username" class="font-semibold">User Name</p>
                        <p id="dropdown-email" class="text-gray-500 text-xs break-words"></p>
                        <div class="flex items-center mt-1">
                            <span
                                class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"
                                id="user-role-badge">
                                <i class="fas fa-user mr-1"></i>Faculty
                            </span>
                            <span class="ml-2 text-xs text-gray-500" id="user-department">CSE</span>
                        </div>
                    </div>
                    <a href="#" id="dropdown-profile-settings" class="block px-4 py-2 text-sm hover:bg-gray-100">
                        <i class="fas fa-user-circle mr-2"></i>Profile Settings
                    </a>
                    <a href="#" id="dropdown-account-settings" class="block px-4 py-2 text-sm hover:bg-gray-100">
                        <i class="fas fa-cog mr-2"></i>Account Settings
                    </a>

                    <div class="border-t border-gray-100"></div>
                    <a href="#" id="dropdown-add-account" class="block px-4 py-2 text-sm hover:bg-gray-100"><i
                            class="fas fa-user-plus mr-2"></i>Add Account</a>
                    <a href="#" id="dropdown-delete-account"
                        class="block px-4 py-2 text-sm text-red-600 hover:bg-red-50"><i
                            class="fas fa-user-times mr-2"></i>Delete Account</a>
                    <a href="#" id="dropdown-sign-out" class="block px-4 py-2 text-sm hover:bg-gray-100"><i
                            class="fas fa-sign-out-alt mr-2"></i>Sign Out</a>
                </div>
            </div>
        </header>

        <main id="main-canvas" class="main-content-area flex-grow backdrop-blur-sm shadow-inner h-full">
            <div id="welcome-content" class="p-6 space-y-8">
                <!-- Hero Section with Animation -->
                <div class="text-center mb-8">
                    <div class="inline-block">
                        <h1
                            class="text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-2 animate-pulse">
                            Welcome to SmartQPGen! 🚀
                        </h1>
                        <div class="h-1 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse"></div>
                    </div>
                    <p class="text-lg text-gray-600 mt-4 animate-fade-in" id="welcome-message">
                        Hello, <span class="font-semibold text-blue-600" id="user-name-display">User</span>! Ready to
                        create amazing question papers?
                    </p>
                </div>

                <!-- Quick Stats Dashboard -->
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Dashboard Metrics</h2>
                    <button onclick="loadDashboardMetrics()"
                        class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200 text-sm">
                        <i class="fas fa-sync-alt mr-1"></i>Refresh
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- Total Questions Stat -->
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer"
                        id="stat-questions">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100 text-sm font-medium">Total Questions</p>
                                <p class="text-3xl font-bold" id="total-questions-count">0</p>
                                <p class="text-blue-200 text-xs mt-1">In your bank</p>
                            </div>
                            <div class="bg-blue-400 bg-opacity-30 rounded-full p-3">
                                <i class="fas fa-question-circle text-2xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <i class="fas fa-arrow-up text-green-300 text-sm mr-1"></i>
                            <span class="text-green-300 text-sm font-medium" id="questions-trend">+12% this week</span>
                        </div>
                    </div>

                    <!-- Generated Papers Stat -->
                    <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer"
                        id="stat-papers">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100 text-sm font-medium">Papers Generated</p>
                                <p class="text-3xl font-bold" id="generated-papers-count">0</p>
                                <p class="text-green-200 text-xs mt-1">This month</p>
                            </div>
                            <div class="bg-green-400 bg-opacity-30 rounded-full p-3">
                                <i class="fas fa-file-alt text-2xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <i class="fas fa-arrow-up text-green-300 text-sm mr-1"></i>
                            <span class="text-green-300 text-sm font-medium" id="papers-trend">+8% this month</span>
                        </div>
                    </div>

                    <!-- Templates Saved Stat -->
                    <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer"
                        id="stat-templates">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-100 text-sm font-medium">Saved Templates</p>
                                <p class="text-3xl font-bold" id="saved-templates-count">0</p>
                                <p class="text-purple-200 text-xs mt-1">Ready to use</p>
                            </div>
                            <div class="bg-purple-400 bg-opacity-30 rounded-full p-3">
                                <i class="fas fa-bookmark text-2xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <i class="fas fa-plus text-purple-300 text-sm mr-1"></i>
                            <span class="text-purple-300 text-sm font-medium">Create new</span>
                        </div>
                    </div>

                    <!-- Success Rate Stat -->
                    <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 cursor-pointer"
                        id="stat-success">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-100 text-sm font-medium">Success Rate</p>
                                <p class="text-3xl font-bold">98%</p>
                                <p class="text-orange-200 text-xs mt-1">Generation success</p>
                            </div>
                            <div class="bg-orange-400 bg-opacity-30 rounded-full p-3">
                                <i class="fas fa-chart-line text-2xl"></i>
                            </div>
                        </div>
                        <div class="mt-4 flex items-center">
                            <i class="fas fa-check text-green-300 text-sm mr-1"></i>
                            <span class="text-green-300 text-sm font-medium">Excellent!</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions Section -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center">
                        <i class="fas fa-bolt text-yellow-500 mr-2"></i>
                        Quick Actions
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- New Question Paper -->
                        <button
                            class="quick-action-btn bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white p-4 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3"
                            id="quick-new-qp">
                            <div class="bg-blue-400 bg-opacity-30 rounded-full p-2">
                                <i class="fas fa-plus text-lg"></i>
                            </div>
                            <div class="text-left">
                                <p class="font-semibold">New Question Paper</p>
                                <p class="text-blue-100 text-sm">Start creating</p>
                            </div>
                        </button>

                        <!-- Upload Questions -->
                        <button
                            class="quick-action-btn bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white p-4 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3"
                            id="quick-upload">
                            <div class="bg-green-400 bg-opacity-30 rounded-full p-2">
                                <i class="fas fa-upload text-lg"></i>
                            </div>
                            <div class="text-left">
                                <p class="font-semibold">Upload Questions</p>
                                <p class="text-green-100 text-sm">Add to bank</p>
                            </div>
                        </button>

                        <!-- Requirements -->
                        <button
                            class="quick-action-btn bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white p-4 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3"
                            id="quick-requirements">
                            <div class="bg-purple-400 bg-opacity-30 rounded-full p-2">
                                <i class="fas fa-clipboard-list text-lg"></i>
                            </div>
                            <div class="text-left">
                                <p class="font-semibold">Set Requirements</p>
                                <p class="text-purple-100 text-sm">Configure QP</p>
                            </div>
                        </button>

                        <!-- Saved Papers -->
                        <button
                            class="quick-action-btn bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white p-4 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3"
                            id="quick-saved">
                            <div class="bg-indigo-400 bg-opacity-30 rounded-full p-2">
                                <i class="fas fa-save text-lg"></i>
                            </div>
                            <div class="text-left">
                                <p class="font-semibold">Saved Papers</p>
                                <p class="text-indigo-100 text-sm">View collection</p>
                            </div>
                        </button>

                        <!-- Recent Papers -->
                        <button
                            class="quick-action-btn bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-600 hover:to-pink-700 text-white p-4 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3"
                            id="quick-recent">
                            <div class="bg-pink-400 bg-opacity-30 rounded-full p-2">
                                <i class="fas fa-history text-lg"></i>
                            </div>
                            <div class="text-left">
                                <p class="font-semibold">Recent Papers</p>
                                <p class="text-pink-100 text-sm">View history</p>
                            </div>
                        </button>

                        <!-- Settings -->
                        <button
                            class="quick-action-btn bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white p-4 rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300 flex items-center space-x-3"
                            id="quick-settings">
                            <div class="bg-gray-400 bg-opacity-30 rounded-full p-2">
                                <i class="fas fa-cog text-lg"></i>
                            </div>
                            <div class="text-left">
                                <p class="font-semibold">Settings</p>
                                <p class="text-gray-100 text-sm">Customize app</p>
                            </div>
                        </button>


                    </div>
                </div>

                <!-- Recent Activity & Tips Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Recent Activity -->
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-clock text-blue-500 mr-2"></i>
                            Recent Activity
                        </h3>
                        <div class="space-y-4" id="recent-activity-list">
                            <div
                                class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200">
                                <div class="bg-green-500 rounded-full p-2">
                                    <i class="fas fa-file-alt text-white text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium text-gray-800">Generated CS701 Question Paper</p>
                                    <p class="text-gray-500 text-sm">2 hours ago</p>
                                </div>
                                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Success</span>
                            </div>

                            <div
                                class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200">
                                <div class="bg-blue-500 rounded-full p-2">
                                    <i class="fas fa-upload text-white text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium text-gray-800">Uploaded 23 new questions</p>
                                    <p class="text-gray-500 text-sm">5 hours ago</p>
                                </div>
                                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Completed</span>
                            </div>

                            <div
                                class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-200">
                                <div class="bg-purple-500 rounded-full p-2">
                                    <i class="fas fa-bookmark text-white text-sm"></i>
                                </div>
                                <div class="flex-1">
                                    <p class="font-medium text-gray-800">Saved requirements template</p>
                                    <p class="text-gray-500 text-sm">1 day ago</p>
                                </div>
                                <span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">Saved</span>
                            </div>
                        </div>
                        <button id="view-all-activity-btn"
                            class="mt-4 text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center">
                            View all activity <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>

                    <!-- Tips & Features -->
                    <div class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl shadow-lg p-6 text-white">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <i class="fas fa-lightbulb text-yellow-300 mr-2"></i>
                            Pro Tips
                        </h3>
                        <div class="space-y-4">
                            <div class="flex items-start space-x-3">
                                <div class="bg-white bg-opacity-20 rounded-full p-1 mt-1">
                                    <i class="fas fa-check text-xs"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Use Requirements Templates</p>
                                    <p class="text-indigo-100 text-sm">Save time by creating reusable requirement
                                        configurations</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-3">
                                <div class="bg-white bg-opacity-20 rounded-full p-1 mt-1">
                                    <i class="fas fa-check text-xs"></i>
                                </div>
                                <div>
                                    <p class="font-medium">Auto-Generate Questions</p>
                                    <p class="text-indigo-100 text-sm">Let AI create balanced question papers
                                        automatically</p>
                                </div>
                            </div>

                            <div class="flex items-start space-x-3">
                                <div class="bg-white bg-opacity-20 rounded-full p-1 mt-1">
                                    <i class="fas fa-check text-xs"></i>
                                </div>
                                <div>
                                    <p class="font-medium">PDF Export Ready</p>
                                    <p class="text-indigo-100 text-sm">Generate professional PDFs with proper formatting
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-6 p-4 bg-white bg-opacity-10 rounded-lg">
                            <p class="text-sm">
                                <i class="fas fa-star text-yellow-300 mr-1"></i>
                                <strong>New Feature:</strong> Bloom's Taxonomy validation ensures educational standards
                                compliance!
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Footer Message -->
                <div
                    class="text-center mt-8 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-100">
                    <p class="text-gray-600">
                        <i class="fas fa-rocket text-blue-500 mr-2"></i>
                        Ready to create your next question paper? Choose an action above or explore the sidebar!
                    </p>
                </div>
            </div>

            <div id="new-qp-canvas" class="hidden p-6 mt-8 border border-blue-200 rounded-lg bg-blue-50">
                <h3 class="text-xl font-semibold mb-4">Generate New Question Paper</h3>

                <div class="mt-4 p-4 border border-blue-300 rounded-lg bg-white shadow-sm">
                    <h4 class="text-lg font-semibold mb-3">Upload Question Bank (PDF or DOCX)</h4>

                    <!-- CIE Selection Dropdown -->
                    <div class="mb-4">
                        <label for="cie-type-select" class="block text-sm font-medium text-gray-700 mb-2">Select CIE
                            Type:</label>
                        <select id="cie-type-select"
                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="standard">Standard Pattern (All Modules)</option>
                            <option value="cie1">CIE 1 (Modules 1, 2, 3)</option>
                            <option value="cie2">CIE 2 (Modules 3, 4, 5)</option>
                        </select>
                    </div>

                    <!-- Standard Upload (for Standard Pattern) -->
                    <div id="standard-upload" class="upload-section">
                        <form id="upload-qb-form" enctype="multipart/form-data">
                            <label for="file-input" class="block text-sm font-medium text-gray-700 mb-1">Select
                                File:</label>
                            <div class="flex items-center space-x-2">
                                <input type="file" id="file-input" name="file" accept=".pdf,.docx"
                                    class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                                    required>
                                <button type="button" id="clear-file-btn"
                                    class="px-3 py-2 text-sm bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition duration-200"
                                    title="Clear selected file">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <p id="selected-file-name" class="mt-2 text-sm text-gray-600 italic hidden"></p>

                            <div class="mt-4 flex items-center">
                                <label for="rephrasing-toggle" class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" value="" id="rephrasing-toggle" class="sr-only peer">
                                    <div
                                        class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white peer-checked:bg-blue-600">
                                    </div>
                                    <span class="ms-3 text-sm font-medium text-gray-900">Enable Rephrasing (AI
                                        Feature)</span>
                                </label>
                            </div>

                            <button type="submit" id="parse-file-btn"
                                class="mt-6 px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition duration-200">
                                Parse Document & Start QP Generation
                            </button>
                        </form>
                    </div>

                    <!-- CIE 1 Upload (Modules 1, 2, 3) -->
                    <div id="cie1-upload" class="upload-section hidden">
                        <form id="upload-cie1-form" enctype="multipart/form-data">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <!-- Module 1 -->
                                <div class="p-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <h5 class="text-sm font-semibold text-gray-700 mb-2">Module 1</h5>
                                    <input type="file" name="module1_file" accept=".pdf,.docx"
                                        class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p id="module1-file-name" class="mt-1 text-xs text-gray-600 italic hidden"></p>
                                </div>

                                <!-- Module 2 -->
                                <div class="p-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <h5 class="text-sm font-semibold text-gray-700 mb-2">Module 2</h5>
                                    <input type="file" name="module2_file" accept=".pdf,.docx"
                                        class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p id="module2-file-name" class="mt-1 text-xs text-gray-600 italic hidden"></p>
                                </div>

                                <!-- Module 3 -->
                                <div class="p-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <h5 class="text-sm font-semibold text-gray-700 mb-2">Module 3</h5>
                                    <input type="file" name="module3_file" accept=".pdf,.docx"
                                        class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p id="module3-file-name" class="mt-1 text-xs text-gray-600 italic hidden"></p>
                                </div>
                            </div>

                            <div class="mt-4 flex items-center">
                                <label for="rephrasing-toggle-cie1" class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" value="" id="rephrasing-toggle-cie1" class="sr-only peer">
                                    <div
                                        class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white peer-checked:bg-blue-600">
                                    </div>
                                    <span class="ms-3 text-sm font-medium text-gray-900">Enable Rephrasing (AI
                                        Feature)</span>
                                </label>
                            </div>

                            <button type="submit" id="parse-cie1-btn"
                                class="mt-6 px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition duration-200">
                                Parse All Modules & Start QP Generation
                            </button>
                        </form>
                    </div>

                    <!-- CIE 2 Upload (Modules 3, 4, 5) -->
                    <div id="cie2-upload" class="upload-section hidden">
                        <form id="upload-cie2-form" enctype="multipart/form-data">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <!-- Module 3 -->
                                <div class="p-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <h5 class="text-sm font-semibold text-gray-700 mb-2">Module 3</h5>
                                    <input type="file" name="module3_file" accept=".pdf,.docx"
                                        class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p id="module3-file-name-cie2" class="mt-1 text-xs text-gray-600 italic hidden"></p>
                                </div>

                                <!-- Module 4 -->
                                <div class="p-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <h5 class="text-sm font-semibold text-gray-700 mb-2">Module 4</h5>
                                    <input type="file" name="module4_file" accept=".pdf,.docx"
                                        class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p id="module4-file-name" class="mt-1 text-xs text-gray-600 italic hidden"></p>
                                </div>

                                <!-- Module 5 -->
                                <div class="p-3 border border-gray-300 rounded-lg bg-gray-50">
                                    <h5 class="text-sm font-semibold text-gray-700 mb-2">Module 5</h5>
                                    <input type="file" name="module5_file" accept=".pdf,.docx"
                                        class="block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-white focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                                    <p id="module5-file-name" class="mt-1 text-xs text-gray-600 italic hidden"></p>
                                </div>
                            </div>

                            <div class="mt-4 flex items-center">
                                <label for="rephrasing-toggle-cie2" class="inline-flex items-center cursor-pointer">
                                    <input type="checkbox" value="" id="rephrasing-toggle-cie2" class="sr-only peer">
                                    <div
                                        class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white peer-checked:bg-blue-600">
                                    </div>
                                    <span class="ms-3 text-sm font-medium text-gray-900">Enable Rephrasing (AI
                                        Feature)</span>
                                </label>
                            </div>

                            <button type="submit" id="parse-cie2-btn"
                                class="mt-6 px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition duration-200">
                                Parse All Modules & Start QP Generation
                            </button>
                        </form>
                    </div>

                    <div id="upload-status" class="mt-3 text-sm font-medium"></div>
                </div>
            </div>

            <div id="qp-editor-canvas"
                class="hidden p-6 mt-8 border border-indigo-200 rounded-lg bg-indigo-50 gap-6 flex-grow">
                <h3 class="text-xl font-semibold mb-4 lg:hidden">Question Paper Editor</h3>

                <div class="qp-editor-flex-container flex-grow flex h-full">
                    <div id="left-pane"
                        class="p-4 border border-indigo-300 rounded-lg bg-white shadow-md flex flex-col h-full overflow-hidden"
                        style="flex: 1; min-width: 0;">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-semibold m-0">
                                Available Questions (Parsed & Custom)
                            </h4>
                            <button id="add-new-question-btn"
                                class="px-3 py-1 text-xs bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200 flex-shrink-0">
                                <i class="fas fa-plus mr-1"></i> Add New
                            </button>
                        </div>
                        <div id="parsed-questions-list" class="flex-grow space-y-3 pr-2">
                            <p class="text-gray-500">Upload and parse a question bank or add new questions.</p>
                            <p>Left content line 1</p>
                            <p>Left content line 2</p>
                            <p>Left content line 3</p>
                            <p>Left content line 4</p>
                            <p>Left content line 5</p>
                            <p>Left content line 6</p>
                            <p>Left content line 7</p>
                            <p>Left content line 8</p>
                            <p>Left content line 9</p>
                            <p>Left content line 10</p>
                            <p>Left content line 11</p>
                            <p>Left content line 12</p>
                            <p>Left content line 13</p>
                            <p>Left content line 14</p>
                            <p>Left content line 15</p>
                            <p>Left content line 16</p>
                            <p>Left content line 17</p>
                            <p>Left content line 18</p>
                            <p>Left content line 19</p>
                            <p>Left content line 20</p>
                            <p>Left content line 21</p>
                            <p>Left content line 22</p>
                            <p>Left content line 23</p>
                            <p>Left content line 24</p>
                            <p>Left content line 25</p>
                            <p>Left content line 26</p>
                            <p>Left content line 27</p>
                            <p>Left content line 28</p>
                            <p>Left content line 29</p>
                            <p>Left content line 30</p>
                        </div>
                    </div>

                    <div id="splitter" class="splitter h-full"></div>

                    <div id="right-pane"
                        class="p-4 border border-indigo-300 rounded-lg bg-white shadow-md flex flex-col h-full overflow-hidden"
                        style="flex: 1; min-width: 0;">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-semibold m-0">
                                Question Paper Preview
                            </h4>
                            <span class="text-sm text-gray-600 flex-shrink-0">Total Marks: <span
                                    id="qp-current-total-marks" class="font-bold text-green-600">0</span> / <input
                                    type="number" id="overall-max-marks-input" value="100" min="1"
                                    class="qp-marks-input w-16 text-center">
                            </span>
                        </div>
                        <button id="add-main-question-btn"
                            class="mb-3 px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition duration-200 w-full">
                            <i class="fas fa-plus mr-1"></i> Add New Main Question
                        </button>

                        <!-- Question Source Selection -->
                        <div class="mb-3 p-3 bg-gray-50 rounded-md border">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-database mr-1"></i> Question Source for Auto-Generation
                            </label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="radio" name="question-source" value="latest" checked
                                        class="mr-2 text-green-600 focus:ring-green-500">
                                    <span class="text-sm">
                                        <strong>Latest Upload Only</strong> - Generate from most recently uploaded
                                        document
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="question-source" value="all"
                                        class="mr-2 text-green-600 focus:ring-green-500">
                                    <span class="text-sm">
                                        <strong>All Uploads</strong> - Generate from all uploaded question banks
                                    </span>
                                </label>
                            </div>

                            <!-- Latest Upload Info -->
                            <div id="latest-upload-info"
                                class="mt-2 p-2 bg-blue-50 rounded text-xs text-blue-700 border border-blue-200">
                                <i class="fas fa-info-circle mr-1"></i>
                                <span id="latest-upload-text">Latest upload info will appear here after uploading a
                                    document</span>
                            </div>
                        </div>

                        <!-- Question Pattern Selection -->
                        <div class="mb-3 p-3 bg-blue-50 rounded-md border border-blue-200">
                            <label class="block text-sm font-medium text-gray-700 mb-2">
                                <i class="fas fa-clipboard-list mr-1"></i> Question Paper Pattern
                            </label>
                            <select id="question-pattern-select"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="standard">Standard Pattern (4 Questions, 25 marks each)</option>
                                <option value="cie1">CIE1 Pattern (Modules 1,2,3 - Q1 OR Q2 from Module 1)</option>
                                <option value="cie2">CIE2 Pattern (Modules 3,4,5 - Q1 OR Q2 from Module 4)</option>
                            </select>
                            <div class="mt-2 text-xs text-gray-600">
                                <span id="pattern-description">Standard: 4 questions with 3 sub-questions each, covering
                                    all modules</span>
                            </div>
                        </div>

                        <button id="generate-questions-btn"
                            class="mb-4 px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition duration-200 w-full">
                            <i class="fas fa-magic mr-1"></i> Generate Questions (Auto)
                        </button>

                        <!-- Export Buttons (shown when paper is generated) -->
                        <div id="export-buttons" class="mb-4 hidden">
                            <button id="export-pdf-btn"
                                class="w-full px-4 py-2 bg-red-600 text-white font-semibold rounded-md hover:bg-red-700 transition duration-200">
                                <i class="fas fa-file-pdf mr-1"></i> Export PDF
                            </button>
                        </div>

                        <!-- Approval System -->
                        <div id="approval-section" class="mb-4 hidden">
                            <div
                                class="bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-3">
                                    <h5 class="font-semibold text-purple-800">
                                        <i class="fas fa-clipboard-check mr-2"></i>Approval Status
                                    </h5>
                                    <span id="approval-status-badge" class="px-3 py-1 rounded-full text-xs font-medium">
                                        <!-- Status will be populated here -->
                                    </span>
                                </div>

                                <div id="approval-actions" class="space-y-2">
                                    <!-- Submit for Approval Button -->
                                    <button id="submit-approval-btn" onclick="handleSubmitApprovalClick(event)"
                                        class="w-full px-4 py-2 bg-purple-600 text-white font-semibold rounded-md hover:bg-purple-700 transition duration-200">
                                        <i class="fas fa-paper-plane mr-2"></i> Submit for HOD Approval
                                    </button>

                                    <!-- Approval Details (shown when submitted) -->
                                    <div id="approval-details" class="hidden text-sm text-gray-600">
                                        <div class="space-y-1">
                                            <div id="approval-submitted-at"></div>
                                            <div id="approval-approved-by"></div>
                                            <div id="approval-comments-display"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Status Tracking Section -->
                        <div id="status-tracking-section" class="mb-4 hidden">
                            <div class="bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <h5 class="font-semibold text-blue-800">
                                        <i class="fas fa-chart-line mr-2"></i>Submission Status
                                    </h5>
                                    <button id="refresh-status-btn"
                                        class="px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition duration-200 text-sm">
                                        <i class="fas fa-sync-alt mr-1"></i>Refresh
                                    </button>
                                </div>

                                <!-- Current Paper Status -->
                                <div id="current-paper-status" class="mb-4">
                                    <div class="flex items-center space-x-3">
                                        <div class="flex-1">
                                            <div class="text-sm font-medium text-gray-700">Current Paper</div>
                                            <div id="current-paper-name" class="text-sm text-gray-500">No paper
                                                generated</div>
                                        </div>
                                        <div id="current-paper-status-badge"
                                            class="px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600">
                                            Not Generated
                                        </div>
                                    </div>
                                </div>

                                <!-- Status Timeline -->
                                <div id="status-timeline" class="space-y-3">
                                    <div class="text-sm font-medium text-gray-700 mb-2">Status Timeline</div>
                                    <div id="timeline-items" class="space-y-2">
                                        <!-- Timeline items will be populated here -->
                                    </div>
                                </div>

                                <!-- Submission History -->
                                <div id="submission-history" class="mt-4">
                                    <div class="text-sm font-medium text-gray-700 mb-2">Recent Submissions</div>
                                    <div id="history-items" class="space-y-2 max-h-32 overflow-y-auto">
                                        <!-- History items will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="qp-preview-list" class="flex-grow space-y-4 pr-2">
                            <p class="text-gray-500">Add main questions above or drag questions here to create new ones.
                            </p>
                            <p>Right content line A</p>
                            <p>Right content line B</p>
                            <p>Right content line C</p>
                            <p>Right content line D</p>
                            <p>Right content line E</p>
                            <p>Right content line F</p>
                            <p>Right content line G</p>
                            <p>Right content line H</p>
                            <p>Right content line I</p>
                            <p>Right content line J</p>
                            <p>Right content line K</p>
                            <p>Right content line L</p>
                            <p>Right content line M</p>
                            <p>Right content line N</p>
                            <p>Right content line O</p>
                            <p>Right content line P</p>
                            <p>Right content line Q</p>
                            <p>Right content line R</p>
                            <p>Right content line S</p>
                            <p>Right content line T</p>
                            <p>Right content line U</p>
                            <p>Right content line V</p>
                            <p>Right content line W</p>
                            <p>Right content line X</p>
                            <p>Right content line Y</p>
                            <p>Right content line Z</p>
                        </div>
                        <div class="mt-4 pt-4 border-t border-indigo-200 flex flex-col gap-3">
                            <!-- Save Question Paper Button -->
                            <button id="save-question-paper-btn"
                                class="w-full px-4 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition duration-200">
                                <i class="fas fa-save mr-1"></i> Save Question Paper
                            </button>



                            <!-- Generate Button -->
                            <button id="generate-final-pdf-btn"
                                class="w-full px-4 py-2 bg-red-600 text-white font-semibold rounded-md hover:bg-red-700 transition duration-200">
                                <i class="fas fa-file-pdf mr-1"></i> Generate PDF
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="requirements-content" class="hidden p-6 mt-8 border border-purple-200 rounded-lg bg-purple-50">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-purple-800">Requirements for Question Paper</h3>
                    <div class="flex space-x-2">
                        <button id="load-template-btn"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-upload mr-2"></i>Load Template
                        </button>
                        <button id="save-template-btn"
                            class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200">
                            <i class="fas fa-save mr-2"></i>Save Template
                        </button>
                    </div>
                </div>

                <!-- Requirements Form -->
                <form id="qp-requirements-form" class="space-y-8">
                    <!-- Basic Information Section -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-purple-100">
                        <h4 class="text-lg font-semibold text-purple-700 mb-4 flex items-center">
                            <i class="fas fa-info-circle mr-2"></i>Basic Information
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subject Name *</label>
                                <input type="text" id="req-subject"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    placeholder="e.g., Design and Analysis of Algorithms" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Subject Code *</label>
                                <input type="text" id="req-subject-code"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    placeholder="e.g., CS701" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Department *</label>
                                <select id="req-department"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    required>
                                    <option value="">Select Department</option>
                                    <option value="CSE">Computer Science & Engineering</option>
                                    <option value="ECE">Electronics & Communication Engineering</option>
                                    <option value="ME">Mechanical Engineering</option>
                                    <option value="CE">Civil Engineering</option>
                                    <option value="EE">Electrical Engineering</option>
                                    <option value="IT">Information Technology</option>
                                    <option value="MBA">Master of Business Administration</option>
                                    <option value="MCA">Master of Computer Applications</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Semester *</label>
                                <select id="req-semester"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    required>
                                    <option value="">Select Semester</option>
                                    <option value="1">1st Semester</option>
                                    <option value="2">2nd Semester</option>
                                    <option value="3">3rd Semester</option>
                                    <option value="4">4th Semester</option>
                                    <option value="5">5th Semester</option>
                                    <option value="6">6th Semester</option>
                                    <option value="7">7th Semester</option>
                                    <option value="8">8th Semester</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Academic Year *</label>
                                <input type="text" id="req-academic-year"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    placeholder="e.g., 2024-25" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Exam Type *</label>
                                <select id="req-exam-type"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    required>
                                    <option value="">Select Exam Type</option>
                                    <option value="Mid-Term">Mid-Term Examination</option>
                                    <option value="End-Term">End-Term Examination</option>
                                    <option value="Supplementary">Supplementary Examination</option>
                                    <option value="Remedial">Remedial Examination</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Elective</label>
                                <select id="req-elective"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="No">No</option>
                                    <option value="Yes">Yes</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Exam Details Section -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-purple-100">
                        <h4 class="text-lg font-semibold text-purple-700 mb-4 flex items-center">
                            <i class="fas fa-clock mr-2"></i>Exam Details
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Duration *</label>
                                <select id="req-duration"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    required>
                                    <option value="">Select Duration</option>
                                    <option value="2">2 Hours</option>
                                    <option value="3">3 Hours</option>
                                    <option value="4">4 Hours</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Total Marks *</label>
                                <select id="req-total-marks"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    required>
                                    <option value="">Select Total Marks</option>
                                    <option value="50">50 Marks</option>
                                    <option value="75">75 Marks</option>
                                    <option value="100">100 Marks</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                                <input type="date" id="req-exam-date"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Time</label>
                                <input type="time" id="req-exam-time"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                            </div>
                        </div>
                    </div>

                    <!-- Question Distribution Section -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-purple-100">
                        <h4 class="text-lg font-semibold text-purple-700 mb-4 flex items-center">
                            <i class="fas fa-chart-pie mr-2"></i>Question Distribution Rules
                        </h4>

                        <!-- Question Pattern -->
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Question Pattern *</label>
                            <select id="req-question-pattern"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                required>
                                <option value="">Select Pattern</option>
                                <option value="standard">Standard Pattern (4 Main Questions, 25 marks each)</option>
                                <option value="cie1">CIE1 Pattern (4 Questions, 25 marks each - Modules 1,2,3)</option>
                                <option value="cie2">CIE2 Pattern (4 Questions, 25 marks each - Modules 3,4,5)</option>
                                <option value="custom">Custom Pattern</option>
                            </select>
                        </div>

                        <!-- Module Distribution -->
                        <div class="mb-6">
                            <h5 class="text-md font-semibold text-gray-800 mb-3">Module Distribution</h5>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Number of Modules
                                        *</label>
                                    <select id="req-num-modules"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        required>
                                        <option value="">Select</option>
                                        <option value="3">3 Modules</option>
                                        <option value="4">4 Modules</option>
                                        <option value="5">5 Modules</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Module Coverage
                                        *</label>
                                    <select id="req-module-coverage"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        required>
                                        <option value="">Select Coverage</option>
                                        <option value="all">All Modules</option>
                                        <option value="selective">Selective Modules</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Distribution Rule
                                        *</label>
                                    <select id="req-distribution-rule"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        required>
                                        <option value="">Select Rule</option>
                                        <option value="equal">Equal Distribution</option>
                                        <option value="weighted">Weighted Distribution</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Bloom's Taxonomy Distribution -->
                        <div class="mb-6">
                            <h5 class="text-md font-semibold text-gray-800 mb-3">Bloom's Taxonomy Distribution</h5>
                            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">L1 (Remember) %</label>
                                    <input type="number" id="req-l1-percent"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        min="0" max="100" value="10">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">L2 (Understand)
                                        %</label>
                                    <input type="number" id="req-l2-percent"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        min="0" max="100" value="20">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">L3 (Apply) %</label>
                                    <input type="number" id="req-l3-percent"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        min="0" max="100" value="30">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">L4 (Analyze) %</label>
                                    <input type="number" id="req-l4-percent"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        min="0" max="100" value="25">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">L5 (Evaluate) %</label>
                                    <input type="number" id="req-l5-percent"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        min="0" max="100" value="10">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">L6 (Create) %</label>
                                    <input type="number" id="req-l6-percent"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        min="0" max="100" value="5">
                                </div>
                            </div>
                            <div class="mt-2">
                                <span class="text-sm text-gray-600">Total: <span id="blooms-total"
                                        class="font-semibold">100</span>%</span>
                                <span id="blooms-validation" class="ml-4 text-sm"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Course Outcomes Mapping Section -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-purple-100">
                        <h4 class="text-lg font-semibold text-purple-700 mb-4 flex items-center">
                            <i class="fas fa-target mr-2"></i>Course Outcomes (CO) Mapping
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CO1 Weight %</label>
                                <input type="number" id="req-co1-weight"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    min="0" max="100" value="20">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CO2 Weight %</label>
                                <input type="number" id="req-co2-weight"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    min="0" max="100" value="20">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CO3 Weight %</label>
                                <input type="number" id="req-co3-weight"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    min="0" max="100" value="20">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CO4 Weight %</label>
                                <input type="number" id="req-co4-weight"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    min="0" max="100" value="20">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">CO5 Weight %</label>
                                <input type="number" id="req-co5-weight"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    min="0" max="100" value="20">
                            </div>
                        </div>
                        <div class="mt-2">
                            <span class="text-sm text-gray-600">Total CO Weight: <span id="co-total"
                                    class="font-semibold">100</span>%</span>
                            <span id="co-validation" class="ml-4 text-sm"></span>
                        </div>
                    </div>

                    <!-- Additional Requirements Section -->
                    <div class="bg-white p-6 rounded-lg shadow-md border border-purple-100">
                        <h4 class="text-lg font-semibold text-purple-700 mb-4 flex items-center">
                            <i class="fas fa-cogs mr-2"></i>Additional Requirements
                        </h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Question Selection
                                    Strategy</label>
                                <select id="req-selection-strategy"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="random">Random Selection</option>
                                    <option value="balanced">Balanced Selection</option>
                                    <option value="difficulty">Difficulty-based Selection</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Difficulty Level</label>
                                <select id="req-difficulty-level"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                    <option value="mixed">Mixed Difficulty</option>
                                    <option value="easy">Easy</option>
                                    <option value="medium">Medium</option>
                                    <option value="hard">Hard</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Special Instructions</label>
                            <textarea id="req-special-instructions"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                rows="3"
                                placeholder="Any special instructions for question paper generation..."></textarea>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-between items-center pt-6 border-t border-purple-200">
                        <div class="flex space-x-3">
                            <button type="button" id="validate-requirements-btn"
                                class="px-6 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200">
                                <i class="fas fa-check-circle mr-2"></i>Validate Requirements
                            </button>
                            <button type="button" id="reset-requirements-btn"
                                class="px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition duration-200">
                                <i class="fas fa-undo mr-2"></i>Reset Form
                            </button>
                        </div>
                        <div class="flex space-x-3">
                            <button type="button" id="preview-requirements-btn"
                                class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-eye mr-2"></i>Preview
                            </button>
                            <button type="submit" id="apply-requirements-btn"
                                class="px-6 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200">
                                <i class="fas fa-arrow-right mr-2"></i>Apply & Generate QP
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Requirements Summary Panel -->
                <div id="requirements-summary"
                    class="hidden mt-8 bg-white p-6 rounded-lg shadow-md border border-purple-100">
                    <h4 class="text-lg font-semibold text-purple-700 mb-4 flex items-center">
                        <i class="fas fa-clipboard-check mr-2"></i>Requirements Summary
                    </h4>
                    <div id="summary-content" class="space-y-3">
                        <!-- Summary content will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <div id="saved-content" class="hidden p-6 mt-8 border border-green-200 rounded-lg bg-green-50">
                <!-- Header Section -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-2xl font-bold text-green-800 flex items-center">
                            <i class="fas fa-save text-green-600 mr-3"></i>
                            Saved QPs & Banks
                        </h3>
                        <p class="text-green-600 mt-1">Manage your saved question papers and question banks</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="refresh-saved-btn"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-sync-alt mr-2"></i>Refresh
                        </button>
                        <button id="export-all-btn"
                            class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200">
                            <i class="fas fa-download mr-2"></i>Export All
                        </button>
                    </div>
                </div>

                <!-- Filter and Search Section -->
                <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Search</label>
                            <div class="relative">
                                <input type="text" id="saved-search"
                                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"
                                    placeholder="Search by name, subject, or type...">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Filter by Type</label>
                            <select id="saved-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="all">All Items</option>
                                <option value="question-papers">Question Papers</option>
                                <option value="question-banks">Question Banks</option>
                                <option value="templates">Templates</option>
                            </select>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sort by</label>
                            <select id="saved-sort"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                <option value="date-desc">Newest First</option>
                                <option value="date-asc">Oldest First</option>
                                <option value="name-asc">Name A-Z</option>
                                <option value="name-desc">Name Z-A</option>
                                <option value="size-desc">Largest First</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Statistics Overview -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100 text-sm">Question Papers</p>
                                <p class="text-2xl font-bold" id="saved-qp-count">0</p>
                            </div>
                            <i class="fas fa-file-alt text-2xl text-blue-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100 text-sm">Question Banks</p>
                                <p class="text-2xl font-bold" id="saved-bank-count">0</p>
                            </div>
                            <i class="fas fa-database text-2xl text-green-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-100 text-sm">Templates</p>
                                <p class="text-2xl font-bold" id="saved-template-count">0</p>
                            </div>
                            <i class="fas fa-bookmark text-2xl text-purple-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-orange-100 text-sm">Total Size</p>
                                <p class="text-2xl font-bold" id="saved-total-size">0 MB</p>
                            </div>
                            <i class="fas fa-hdd text-2xl text-orange-200"></i>
                        </div>
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="bg-white rounded-lg shadow-md">
                    <!-- Tab Navigation -->
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8 px-6 py-3">
                            <button
                                class="saved-tab-btn active border-b-2 border-green-500 text-green-600 font-medium py-2"
                                data-tab="all">
                                All Items (<span id="tab-all-count">0</span>)
                            </button>
                            <button
                                class="saved-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="question-papers">
                                Question Papers (<span id="tab-qp-count">0</span>)
                            </button>
                            <button
                                class="saved-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="question-banks">
                                Question Banks (<span id="tab-bank-count">0</span>)
                            </button>
                            <button
                                class="saved-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="templates">
                                Templates (<span id="tab-template-count">0</span>)
                            </button>
                        </nav>
                    </div>

                    <!-- Content List -->
                    <div class="p-6">
                        <!-- Loading State -->
                        <div id="saved-loading" class="hidden text-center py-8">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600">
                            </div>
                            <p class="mt-2 text-gray-600">Loading saved items...</p>
                        </div>

                        <!-- Empty State -->
                        <div id="saved-empty" class="hidden text-center py-12">
                            <div class="mx-auto h-24 w-24 text-gray-400 mb-4">
                                <i class="fas fa-folder-open text-6xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-900 mb-2">No saved items found</h3>
                            <p class="text-gray-500 mb-6">Start creating question papers and they'll appear here</p>
                            <button
                                class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200"
                                onclick="showContent(newQpCanvas, 'New Question Paper')">
                                <i class="fas fa-plus mr-2"></i>Create New Question Paper
                            </button>
                        </div>

                        <!-- Items List -->
                        <div id="saved-items-list" class="space-y-4">
                            <!-- Items will be populated by JavaScript -->
                        </div>

                        <!-- Pagination -->
                        <div id="saved-pagination"
                            class="hidden justify-between items-center mt-6 pt-6 border-t border-gray-200">
                            <div class="text-sm text-gray-700">
                                Showing <span id="pagination-start">1</span> to <span id="pagination-end">10</span> of
                                <span id="pagination-total">0</span> results
                            </div>
                            <div class="flex space-x-2">
                                <button id="pagination-prev"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-left mr-1"></i>Previous
                                </button>
                                <div id="pagination-numbers" class="flex space-x-1">
                                    <!-- Page numbers will be populated by JavaScript -->
                                </div>
                                <button id="pagination-next"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    Next<i class="fas fa-chevron-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal Dialogs -->
                <!-- View Details Modal -->
                <div id="view-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900" id="view-modal-title">Item Details</h3>
                            <button class="text-gray-400 hover:text-gray-600" onclick="closeModal('view-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6 overflow-y-auto max-h-[70vh]" id="view-modal-content">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                        <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                            <button
                                class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                onclick="closeModal('view-modal')">
                                Close
                            </button>
                            <button id="view-modal-action"
                                class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200">
                                Use This Item
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Delete Confirmation Modal -->
                <div id="delete-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                        <div class="p-6">
                            <div class="flex items-center mb-4">
                                <div class="bg-red-100 rounded-full p-3 mr-4">
                                    <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">Confirm Deletion</h3>
                                    <p class="text-gray-600">This action cannot be undone.</p>
                                </div>
                            </div>
                            <p class="text-gray-700 mb-6" id="delete-modal-message">
                                Are you sure you want to delete this item?
                            </p>
                            <div class="flex justify-end space-x-3">
                                <button
                                    class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                    onclick="closeModal('delete-modal')">
                                    Cancel
                                </button>
                                <button id="confirm-delete-btn"
                                    class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200">
                                    <i class="fas fa-trash mr-2"></i>Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Export Options Modal -->
                <div id="export-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900">Export Options</h3>
                            <button class="text-gray-400 hover:text-gray-600" onclick="closeModal('export-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Export Format</label>
                                    <select id="export-format"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                        <option value="json">JSON (Complete Data)</option>
                                        <option value="csv">CSV (Summary)</option>
                                        <option value="pdf">PDF (Formatted)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Include</label>
                                    <div class="space-y-2">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="export-qp" class="mr-2" checked>
                                            <span class="text-sm">Question Papers</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="export-banks" class="mr-2" checked>
                                            <span class="text-sm">Question Banks</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="export-templates" class="mr-2" checked>
                                            <span class="text-sm">Templates</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                            <button
                                class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                onclick="closeModal('export-modal')">
                                Cancel
                            </button>
                            <button id="confirm-export-btn"
                                class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Approval Submission Modal -->
                <div id="approval-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-lg w-full">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900">
                                <i class="fas fa-paper-plane mr-2 text-purple-600"></i>Submit for Approval
                            </h3>
                            <button class="text-gray-400 hover:text-gray-600" onclick="closeModal('approval-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                    <div class="flex items-center">
                                        <i class="fas fa-info-circle text-blue-600 mr-2"></i>
                                        <p class="text-sm text-blue-800">
                                            Your question paper will be submitted to the HOD for review and approval.
                                        </p>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Comments
                                        (Optional)</label>
                                    <textarea id="approval-comments" rows="4"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                        placeholder="Add any additional comments or notes for the HOD..."></textarea>
                                </div>

                                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                                    <div class="flex items-start">
                                        <i class="fas fa-clock text-yellow-600 mr-2 mt-0.5"></i>
                                        <div class="text-sm text-yellow-800">
                                            <p class="font-medium">Expected Review Time:</p>
                                            <p>2-3 business days for standard review</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                            <button onclick="closeModal('approval-modal')"
                                class="px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition duration-200">
                                Cancel
                            </button>
                            <button id="confirm-approval-btn" onclick="submitForApproval()"
                                class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200">
                                <i class="fas fa-paper-plane mr-2"></i>Submit for Approval
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="recent-content" class="hidden p-6 mt-8 border border-yellow-200 rounded-lg bg-yellow-50">
                <!-- Header Section -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-2xl font-bold text-yellow-800 flex items-center">
                            <i class="fas fa-history text-yellow-600 mr-3"></i>
                            Recent Generated QPs
                        </h3>
                        <p class="text-yellow-600 mt-1">View and manage your recently generated question papers</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="refresh-recent-btn"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-sync-alt mr-2"></i>Refresh
                        </button>
                        <button id="clear-history-btn"
                            class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200">
                            <i class="fas fa-trash mr-2"></i>Clear History
                        </button>
                        <button id="export-recent-btn"
                            class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200">
                            <i class="fas fa-download mr-2"></i>Export List
                        </button>
                    </div>
                </div>

                <!-- Filter and Search Section -->
                <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Search Recent QPs</label>
                            <div class="relative">
                                <input type="text" id="recent-search"
                                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
                                    placeholder="Search by name, subject, or date...">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Time Period</label>
                            <select id="recent-period-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                <option value="all">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="quarter">Last 3 Months</option>
                            </select>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select id="recent-status-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                <option value="all">All Status</option>
                                <option value="success">Successfully Generated</option>
                                <option value="downloaded">Downloaded</option>
                                <option value="shared">Shared</option>
                                <option value="archived">Archived</option>
                            </select>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sort by</label>
                            <select id="recent-sort"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500">
                                <option value="date-desc">Newest First</option>
                                <option value="date-asc">Oldest First</option>
                                <option value="name-asc">Name A-Z</option>
                                <option value="name-desc">Name Z-A</option>
                                <option value="downloads-desc">Most Downloaded</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Statistics Overview -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-yellow-100 text-sm">Total Generated</p>
                                <p class="text-2xl font-bold" id="recent-total-count">0</p>
                            </div>
                            <i class="fas fa-file-alt text-2xl text-yellow-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100 text-sm">This Week</p>
                                <p class="text-2xl font-bold" id="recent-week-count">0</p>
                            </div>
                            <i class="fas fa-calendar-week text-2xl text-green-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100 text-sm">Downloaded</p>
                                <p class="text-2xl font-bold" id="recent-downloaded-count">0</p>
                            </div>
                            <i class="fas fa-download text-2xl text-blue-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-purple-100 text-sm">Success Rate</p>
                                <p class="text-2xl font-bold" id="recent-success-rate">100%</p>
                            </div>
                            <i class="fas fa-chart-line text-2xl text-purple-200"></i>
                        </div>
                    </div>
                </div>

                <!-- View Toggle -->
                <div class="bg-white rounded-lg shadow-md mb-6">
                    <div class="border-b border-gray-200 px-6 py-3">
                        <div class="flex justify-between items-center">
                            <h4 class="text-lg font-semibold text-gray-900">Recent Question Papers</h4>
                            <div class="flex space-x-2">
                                <button id="list-view-btn"
                                    class="view-toggle-btn active px-3 py-1 text-sm bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200">
                                    <i class="fas fa-list mr-1"></i>List View
                                </button>
                                <button id="timeline-view-btn"
                                    class="view-toggle-btn px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200">
                                    <i class="fas fa-clock mr-1"></i>Timeline View
                                </button>
                                <button id="grid-view-btn"
                                    class="view-toggle-btn px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200">
                                    <i class="fas fa-th-large mr-1"></i>Grid View
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Content Area -->
                    <div class="p-6">
                        <!-- Loading State -->
                        <div id="recent-loading" class="hidden text-center py-8">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600">
                            </div>
                            <p class="mt-2 text-gray-600">Loading recent question papers...</p>
                        </div>

                        <!-- Empty State -->
                        <div id="recent-empty" class="hidden text-center py-12">
                            <div class="mx-auto h-24 w-24 text-gray-400 mb-4">
                                <i class="fas fa-file-alt text-6xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-900 mb-2">No recent question papers</h3>
                            <p class="text-gray-500 mb-6">Generate your first question paper to see it here</p>
                            <button
                                class="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200"
                                onclick="showContent(newQpCanvas, 'New Question Paper')">
                                <i class="fas fa-plus mr-2"></i>Generate Question Paper
                            </button>
                        </div>

                        <!-- List View -->
                        <div id="recent-list-view" class="space-y-4">
                            <!-- Items will be populated by JavaScript -->
                        </div>

                        <!-- Timeline View -->
                        <div id="recent-timeline-view" class="hidden">
                            <div class="relative">
                                <!-- Timeline line -->
                                <div class="absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300"></div>
                                <!-- Timeline items will be populated by JavaScript -->
                                <div id="recent-timeline-items" class="space-y-6">
                                    <!-- Timeline items will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Grid View -->
                        <div id="recent-grid-view" class="hidden grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- Grid items will be populated by JavaScript -->
                        </div>

                        <!-- Pagination -->
                        <div id="recent-pagination"
                            class="hidden justify-between items-center mt-6 pt-6 border-t border-gray-200">
                            <div class="text-sm text-gray-700">
                                Showing <span id="recent-pagination-start">1</span> to <span
                                    id="recent-pagination-end">10</span> of <span id="recent-pagination-total">0</span>
                                results
                            </div>
                            <div class="flex space-x-2">
                                <button id="recent-pagination-prev"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-left mr-1"></i>Previous
                                </button>
                                <div id="recent-pagination-numbers" class="flex space-x-1">
                                    <!-- Page numbers will be populated by JavaScript -->
                                </div>
                                <button id="recent-pagination-next"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    Next<i class="fas fa-chevron-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal Dialogs -->
                <!-- View QP Details Modal -->
                <div id="recent-view-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900" id="recent-view-modal-title">Question Paper
                                Details</h3>
                            <button class="text-gray-400 hover:text-gray-600"
                                onclick="closeRecentModal('recent-view-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6 overflow-y-auto max-h-[70vh]" id="recent-view-modal-content">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                        <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                            <button
                                class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                onclick="closeRecentModal('recent-view-modal')">
                                Close
                            </button>
                            <button id="recent-view-modal-download"
                                class="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200">
                                <i class="fas fa-download mr-2"></i>Download
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Share Modal -->
                <div id="recent-share-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900">Share Question Paper</h3>
                            <button class="text-gray-400 hover:text-gray-600"
                                onclick="closeRecentModal('recent-share-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Share Link</label>
                                    <div class="flex">
                                        <input type="text" id="share-link-input"
                                            class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
                                            readonly>
                                        <button id="copy-link-btn"
                                            class="px-4 py-2 bg-yellow-600 text-white rounded-r-md hover:bg-yellow-700 transition duration-200">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Share via</label>
                                    <div class="flex space-x-2">
                                        <button
                                            class="share-btn flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200"
                                            data-platform="email">
                                            <i class="fas fa-envelope mr-2"></i>Email
                                        </button>
                                        <button
                                            class="share-btn flex-1 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200"
                                            data-platform="whatsapp">
                                            <i class="fab fa-whatsapp mr-2"></i>WhatsApp
                                        </button>
                                        <button
                                            class="share-btn flex-1 px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition duration-200"
                                            data-platform="twitter">
                                            <i class="fab fa-twitter mr-2"></i>Twitter
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                            <button
                                class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                onclick="closeRecentModal('recent-share-modal')">
                                Close
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Rename Modal -->
                <div id="recent-rename-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900">Rename Question Paper</h3>
                            <button class="text-gray-400 hover:text-gray-600"
                                onclick="closeRecentModal('recent-rename-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">New Name</label>
                                <input type="text" id="rename-input"
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
                                    placeholder="Enter new name...">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 p-6 border-t border-gray-200">
                            <button
                                class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                onclick="closeRecentModal('recent-rename-modal')">
                                Cancel
                            </button>
                            <button id="confirm-rename-btn"
                                class="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200">
                                <i class="fas fa-save mr-2"></i>Save
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Delete Confirmation Modal -->
                <div id="recent-delete-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                        <div class="p-6">
                            <div class="flex items-center mb-4">
                                <div class="bg-red-100 rounded-full p-3 mr-4">
                                    <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                                </div>
                                <div>
                                    <h3 class="text-lg font-semibold text-gray-900">Confirm Deletion</h3>
                                    <p class="text-gray-600">This action cannot be undone.</p>
                                </div>
                            </div>
                            <p class="text-gray-700 mb-6" id="recent-delete-modal-message">
                                Are you sure you want to delete this question paper?
                            </p>
                            <div class="flex justify-end space-x-3">
                                <button
                                    class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-200"
                                    onclick="closeRecentModal('recent-delete-modal')">
                                    Cancel
                                </button>
                                <button id="recent-confirm-delete-btn"
                                    class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200">
                                    <i class="fas fa-trash mr-2"></i>Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="settings-content" class="hidden p-6 mt-8 border border-gray-200 rounded-lg bg-gray-50">
                <!-- Header Section -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                            <i class="fas fa-cog text-gray-600 mr-3"></i>
                            Settings & Preferences
                        </h3>
                        <p class="text-gray-600 mt-1">Customize your SmartQPGen experience</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="reset-settings-btn"
                            class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200">
                            <i class="fas fa-undo mr-2"></i>Reset All
                        </button>
                        <button id="export-settings-btn"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-download mr-2"></i>Export Settings
                        </button>
                    </div>
                </div>

                <!-- Settings Tabs -->
                <div class="bg-white rounded-lg shadow-md mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8 px-6 py-3">
                            <button
                                class="settings-tab-btn active border-b-2 border-gray-500 text-gray-600 font-medium py-2"
                                data-tab="general">
                                <i class="fas fa-sliders-h mr-2"></i>General
                            </button>
                            <button
                                class="settings-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="appearance">
                                <i class="fas fa-palette mr-2"></i>Appearance
                            </button>
                            <button
                                class="settings-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="generation">
                                <i class="fas fa-file-alt mr-2"></i>Generation
                            </button>
                            <button
                                class="settings-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="data">
                                <i class="fas fa-database mr-2"></i>Data & Storage
                            </button>
                            <button
                                class="settings-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="advanced">
                                <i class="fas fa-cogs mr-2"></i>Advanced
                            </button>
                        </nav>
                    </div>

                    <!-- General Settings Tab -->
                    <div id="settings-general-tab" class="settings-tab-content p-6">
                        <div class="space-y-6">
                            <!-- User Preferences -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-user-cog text-gray-600 mr-2"></i>
                                    User Preferences
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default
                                            Subject</label>
                                        <input type="text" id="default-subject"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"
                                            placeholder="Enter default subject">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default
                                            Department</label>
                                        <input type="text" id="default-department"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"
                                            placeholder="Enter default department">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default
                                            Semester</label>
                                        <select id="default-semester"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500">
                                            <option value="">Select semester</option>
                                            <option value="1">Semester 1</option>
                                            <option value="2">Semester 2</option>
                                            <option value="3">Semester 3</option>
                                            <option value="4">Semester 4</option>
                                            <option value="5">Semester 5</option>
                                            <option value="6">Semester 6</option>
                                            <option value="7">Semester 7</option>
                                            <option value="8">Semester 8</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Academic
                                            Year</label>
                                        <input type="text" id="default-academic-year"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"
                                            placeholder="e.g., 2024-25">
                                    </div>
                                </div>
                            </div>

                            <!-- Notification Settings -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-bell text-gray-600 mr-2"></i>
                                    Notifications
                                </h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="notify-generation-complete" class="mr-3 rounded">
                                        <span class="text-sm">Notify when question paper generation is complete</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="notify-save-success" class="mr-3 rounded">
                                        <span class="text-sm">Notify when items are saved successfully</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="notify-errors" class="mr-3 rounded">
                                        <span class="text-sm">Show error notifications</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="notify-tips" class="mr-3 rounded">
                                        <span class="text-sm">Show helpful tips and suggestions</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Auto-save Settings -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-save text-gray-600 mr-2"></i>
                                    Auto-save & Backup
                                </h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="auto-save-enabled" class="mr-3 rounded">
                                        <span class="text-sm">Enable auto-save for question papers</span>
                                    </label>
                                    <div class="ml-6">
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Auto-save
                                            interval</label>
                                        <select id="auto-save-interval"
                                            class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500">
                                            <option value="30">30 seconds</option>
                                            <option value="60">1 minute</option>
                                            <option value="300">5 minutes</option>
                                            <option value="600">10 minutes</option>
                                        </select>
                                    </div>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="backup-to-cloud" class="mr-3 rounded">
                                        <span class="text-sm">Backup data to cloud storage (when available)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Appearance Settings Tab -->
                    <div id="settings-appearance-tab" class="settings-tab-content hidden p-6">
                        <div class="space-y-6">
                            <!-- Theme Settings -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-moon text-gray-600 mr-2"></i>
                                    Theme & Display
                                </h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-3">Theme Mode</label>
                                        <div class="flex items-center space-x-6">
                                            <label class="flex items-center cursor-pointer">
                                                <input type="radio" name="theme-mode" value="light" class="mr-2">
                                                <i class="fas fa-sun text-yellow-500 mr-2"></i>
                                                <span class="text-sm">Light Mode</span>
                                            </label>
                                            <label class="flex items-center cursor-pointer">
                                                <input type="radio" name="theme-mode" value="dark" class="mr-2">
                                                <i class="fas fa-moon text-blue-500 mr-2"></i>
                                                <span class="text-sm">Dark Mode</span>
                                            </label>
                                            <label class="flex items-center cursor-pointer">
                                                <input type="radio" name="theme-mode" value="auto" class="mr-2">
                                                <i class="fas fa-adjust text-gray-500 mr-2"></i>
                                                <span class="text-sm">Auto (System)</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Font Size</label>
                                        <select id="font-size-setting"
                                            class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500">
                                            <option value="small">Small</option>
                                            <option value="medium">Medium (Default)</option>
                                            <option value="large">Large</option>
                                            <option value="extra-large">Extra Large</option>
                                        </select>
                                    </div>

                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Sidebar
                                            Width</label>
                                        <select id="sidebar-width-setting"
                                            class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500">
                                            <option value="narrow">Narrow</option>
                                            <option value="normal">Normal (Default)</option>
                                            <option value="wide">Wide</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Animation Settings -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-magic text-gray-600 mr-2"></i>
                                    Animations & Effects
                                </h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enable-animations" class="mr-3 rounded">
                                        <span class="text-sm">Enable smooth animations and transitions</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enable-hover-effects" class="mr-3 rounded">
                                        <span class="text-sm">Enable hover effects on buttons and cards</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enable-loading-animations" class="mr-3 rounded">
                                        <span class="text-sm">Show loading animations</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="reduce-motion" class="mr-3 rounded">
                                        <span class="text-sm">Reduce motion (accessibility)</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Color Customization -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-palette text-gray-600 mr-2"></i>
                                    Color Customization
                                </h4>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Primary
                                            Color</label>
                                        <div class="flex space-x-2">
                                            <input type="color" id="primary-color"
                                                class="w-12 h-8 border border-gray-300 rounded cursor-pointer"
                                                value="#3B82F6">
                                            <input type="text"
                                                class="flex-1 px-2 py-1 text-xs border border-gray-300 rounded"
                                                value="#3B82F6" readonly>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                                        <div class="flex space-x-2">
                                            <input type="color" id="accent-color"
                                                class="w-12 h-8 border border-gray-300 rounded cursor-pointer"
                                                value="#10B981">
                                            <input type="text"
                                                class="flex-1 px-2 py-1 text-xs border border-gray-300 rounded"
                                                value="#10B981" readonly>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Warning
                                            Color</label>
                                        <div class="flex space-x-2">
                                            <input type="color" id="warning-color"
                                                class="w-12 h-8 border border-gray-300 rounded cursor-pointer"
                                                value="#F59E0B">
                                            <input type="text"
                                                class="flex-1 px-2 py-1 text-xs border border-gray-300 rounded"
                                                value="#F59E0B" readonly>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Danger Color</label>
                                        <div class="flex space-x-2">
                                            <input type="color" id="danger-color"
                                                class="w-12 h-8 border border-gray-300 rounded cursor-pointer"
                                                value="#EF4444">
                                            <input type="text"
                                                class="flex-1 px-2 py-1 text-xs border border-gray-300 rounded"
                                                value="#EF4444" readonly>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <button id="reset-colors-btn"
                                        class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition duration-200">
                                        <i class="fas fa-undo mr-2"></i>Reset to Default Colors
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Generation Settings Tab -->
                    <div id="settings-generation-tab" class="settings-tab-content hidden p-6">
                        <div class="space-y-6">
                            <!-- Default Generation Settings -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-file-alt text-gray-600 mr-2"></i>
                                    Default Generation Settings
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default Total
                                            Marks</label>
                                        <input type="number" id="default-total-marks"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"
                                            value="100" min="1" max="1000">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default Duration
                                            (hours)</label>
                                        <input type="number" id="default-duration"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500"
                                            value="3" min="1" max="8" step="0.5">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default Selection
                                            Strategy</label>
                                        <select id="default-selection-strategy"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500">
                                            <option value="balanced">Balanced Selection</option>
                                            <option value="random">Random Selection</option>
                                            <option value="difficulty-based">Difficulty-based</option>
                                            <option value="co-based">CO-based</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default Difficulty
                                            Level</label>
                                        <select id="default-difficulty"
                                            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500">
                                            <option value="mixed">Mixed Difficulty</option>
                                            <option value="easy">Easy</option>
                                            <option value="medium">Medium</option>
                                            <option value="hard">Hard</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Question Paper Format -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-file-pdf text-gray-600 mr-2"></i>
                                    Question Paper Format
                                </h4>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Default Export
                                            Format</label>
                                        <div class="flex space-x-4">
                                            <label class="flex items-center">
                                                <input type="radio" name="default-format" value="docx" class="mr-2">
                                                <i class="fas fa-file-word text-blue-600 mr-2"></i>
                                                <span class="text-sm">DOCX</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="default-format" value="pdf" class="mr-2">
                                                <i class="fas fa-file-pdf text-red-600 mr-2"></i>
                                                <span class="text-sm">PDF</span>
                                            </label>
                                            <label class="flex items-center">
                                                <input type="radio" name="default-format" value="both" class="mr-2">
                                                <i class="fas fa-files text-gray-600 mr-2"></i>
                                                <span class="text-sm">Both</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="space-y-3">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="include-header" class="mr-3 rounded">
                                            <span class="text-sm">Include header with institution details</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="include-instructions" class="mr-3 rounded">
                                            <span class="text-sm">Include general instructions</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="include-marking-scheme" class="mr-3 rounded">
                                            <span class="text-sm">Include marking scheme</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="number-questions" class="mr-3 rounded">
                                            <span class="text-sm">Auto-number questions</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Validation Settings -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-check-circle text-gray-600 mr-2"></i>
                                    Validation & Quality Control
                                </h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="validate-blooms-taxonomy" class="mr-3 rounded">
                                        <span class="text-sm">Validate Bloom's Taxonomy distribution</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="validate-co-coverage" class="mr-3 rounded">
                                        <span class="text-sm">Validate Course Outcome coverage</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="validate-difficulty-balance" class="mr-3 rounded">
                                        <span class="text-sm">Validate difficulty level balance</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="check-duplicate-questions" class="mr-3 rounded">
                                        <span class="text-sm">Check for duplicate questions</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="validate-total-marks" class="mr-3 rounded">
                                        <span class="text-sm">Validate total marks calculation</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Settings Tab -->
                    <div id="settings-advanced-tab" class="settings-tab-content hidden p-6">
                        <div class="space-y-6">
                            <!-- Developer Options -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-code text-gray-600 mr-2"></i>
                                    Developer Options
                                </h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enable-debug-mode" class="mr-3 rounded">
                                        <span class="text-sm">Enable debug mode (shows console logs)</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="show-performance-metrics" class="mr-3 rounded">
                                        <span class="text-sm">Show performance metrics</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="enable-experimental-features" class="mr-3 rounded">
                                        <span class="text-sm">Enable experimental features</span>
                                    </label>
                                </div>
                            </div>

                            <!-- System Information -->
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-info-circle text-gray-600 mr-2"></i>
                                    System Information
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <dl class="space-y-2">
                                            <div class="flex justify-between">
                                                <dt class="text-gray-600">Version:</dt>
                                                <dd class="font-medium">SmartQPGen v2.0.0</dd>
                                            </div>
                                            <div class="flex justify-between">
                                                <dt class="text-gray-600">Browser:</dt>
                                                <dd class="font-medium" id="browser-info">Loading...</dd>
                                            </div>
                                            <div class="flex justify-between">
                                                <dt class="text-gray-600">Screen Resolution:</dt>
                                                <dd class="font-medium" id="screen-resolution">Loading...</dd>
                                            </div>
                                        </dl>
                                    </div>
                                    <div>
                                        <dl class="space-y-2">
                                            <div class="flex justify-between">
                                                <dt class="text-gray-600">Local Storage:</dt>
                                                <dd class="font-medium" id="storage-support">Supported</dd>
                                            </div>
                                            <div class="flex justify-between">
                                                <dt class="text-gray-600">Last Updated:</dt>
                                                <dd class="font-medium" id="last-updated">Loading...</dd>
                                            </div>
                                            <div class="flex justify-between">
                                                <dt class="text-gray-600">Session Duration:</dt>
                                                <dd class="font-medium" id="session-duration">Loading...</dd>
                                            </div>
                                        </dl>
                                    </div>
                                </div>
                            </div>

                            <!-- Reset Options -->
                            <div class="bg-red-50 rounded-lg p-4 border border-red-200">
                                <h4 class="text-lg font-semibold text-red-900 mb-4 flex items-center">
                                    <i class="fas fa-exclamation-triangle text-red-600 mr-2"></i>
                                    Reset Options
                                </h4>
                                <div class="space-y-3">
                                    <p class="text-sm text-red-700">These actions cannot be undone. Please proceed with
                                        caution.</p>
                                    <div class="flex flex-wrap gap-3">
                                        <button id="reset-settings-only-btn"
                                            class="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200">
                                            <i class="fas fa-undo mr-2"></i>Reset Settings Only
                                        </button>
                                        <button id="reset-data-only-btn"
                                            class="px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 transition duration-200">
                                            <i class="fas fa-database mr-2"></i>Reset Data Only
                                        </button>
                                        <button id="factory-reset-btn"
                                            class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200">
                                            <i class="fas fa-exclamation-triangle mr-2"></i>Factory Reset
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="help-content" class="hidden p-6 mt-8 border border-orange-200 rounded-lg bg-orange-50">
                <!-- Header Section -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-2xl font-bold text-orange-800 flex items-center">
                            <i class="fas fa-question-circle text-orange-600 mr-3"></i>
                            Help & Documentation
                        </h3>
                        <p class="text-orange-600 mt-1">Complete guide to using SmartQPGen effectively</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="help-search-btn"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-search mr-2"></i>Search Help
                        </button>
                        <button id="help-print-btn"
                            class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200">
                            <i class="fas fa-print mr-2"></i>Print Guide
                        </button>
                    </div>
                </div>

                <!-- Search Box -->
                <div class="bg-white p-4 rounded-lg shadow-md mb-6 hidden" id="help-search-box">
                    <div class="relative">
                        <input type="text" id="help-search-input"
                            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500"
                            placeholder="Search help topics...">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <div id="help-search-results" class="mt-4 hidden">
                        <!-- Search results will be populated here -->
                    </div>
                </div>

                <!-- Help Navigation -->
                <div class="bg-white rounded-lg shadow-md mb-6">
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8 px-6 py-3">
                            <button
                                class="help-tab-btn active border-b-2 border-orange-500 text-orange-600 font-medium py-2"
                                data-tab="getting-started">
                                <i class="fas fa-play mr-2"></i>Getting Started
                            </button>
                            <button
                                class="help-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="features">
                                <i class="fas fa-star mr-2"></i>Features
                            </button>
                            <button
                                class="help-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="tutorials">
                                <i class="fas fa-graduation-cap mr-2"></i>Tutorials
                            </button>
                            <button
                                class="help-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="faq">
                                <i class="fas fa-question mr-2"></i>FAQ
                            </button>
                            <button
                                class="help-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="troubleshooting">
                                <i class="fas fa-wrench mr-2"></i>Troubleshooting
                            </button>
                        </nav>
                    </div>

                    <!-- Getting Started Tab -->
                    <div id="help-getting-started-tab" class="help-tab-content p-6">
                        <div class="space-y-6">
                            <!-- Welcome Section -->
                            <div class="bg-gradient-to-r from-orange-100 to-yellow-100 rounded-lg p-6">
                                <h4 class="text-xl font-bold text-orange-900 mb-4 flex items-center">
                                    <i class="fas fa-rocket text-orange-600 mr-2"></i>
                                    Welcome to SmartQPGen!
                                </h4>
                                <p class="text-orange-800 mb-4">
                                    SmartQPGen is an intelligent question paper generation system that helps educators
                                    create balanced,
                                    high-quality question papers efficiently. Whether you're a teacher, professor, or
                                    educational administrator,
                                    this tool streamlines the entire process from question bank management to final
                                    paper generation.
                                </p>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
                                    <div class="bg-white rounded-lg p-4 shadow-sm">
                                        <i class="fas fa-upload text-blue-500 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">1. Upload Questions</h5>
                                        <p class="text-sm text-gray-600">Start by uploading your question bank or
                                            creating questions manually</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm">
                                        <i class="fas fa-cogs text-green-500 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">2. Set Requirements</h5>
                                        <p class="text-sm text-gray-600">Define your question paper requirements and
                                            constraints</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm">
                                        <i class="fas fa-file-alt text-purple-500 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">3. Generate Paper</h5>
                                        <p class="text-sm text-gray-600">Let AI create a balanced question paper meeting
                                            your criteria</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Start Guide -->
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-bolt text-gray-600 mr-2"></i>
                                    Quick Start Guide
                                </h4>
                                <div class="space-y-4">
                                    <div class="flex items-start space-x-4">
                                        <div
                                            class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                                            1</div>
                                        <div>
                                            <h5 class="font-medium text-gray-800">Create Your First Question Paper</h5>
                                            <p class="text-sm text-gray-600">Click on "New Question Paper" in the
                                                sidebar to begin the process.</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start space-x-4">
                                        <div
                                            class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                                            2</div>
                                        <div>
                                            <h5 class="font-medium text-gray-800">Upload Your Question Bank</h5>
                                            <p class="text-sm text-gray-600">Use the file upload feature to import
                                                questions from Excel, CSV, or JSON files.</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start space-x-4">
                                        <div
                                            class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                                            3</div>
                                        <div>
                                            <h5 class="font-medium text-gray-800">Set Paper Requirements</h5>
                                            <p class="text-sm text-gray-600">Define total marks, duration, difficulty
                                                levels, and Course Outcome distribution.</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start space-x-4">
                                        <div
                                            class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                                            4</div>
                                        <div>
                                            <h5 class="font-medium text-gray-800">Generate and Download</h5>
                                            <p class="text-sm text-gray-600">Click "Generate Question Paper" and
                                                download your professionally formatted paper.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- System Requirements -->
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-desktop text-gray-600 mr-2"></i>
                                    System Requirements
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-medium text-gray-800 mb-2">Supported Browsers</h5>
                                        <ul class="text-sm text-gray-600 space-y-1">
                                            <li><i class="fab fa-chrome text-blue-500 mr-2"></i>Google Chrome 90+</li>
                                            <li><i class="fab fa-firefox text-orange-500 mr-2"></i>Mozilla Firefox 88+
                                            </li>
                                            <li><i class="fab fa-safari text-blue-600 mr-2"></i>Safari 14+</li>
                                            <li><i class="fab fa-edge text-blue-700 mr-2"></i>Microsoft Edge 90+</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800 mb-2">Recommended Specifications</h5>
                                        <ul class="text-sm text-gray-600 space-y-1">
                                            <li><i class="fas fa-memory text-gray-500 mr-2"></i>4GB RAM minimum</li>
                                            <li><i class="fas fa-hdd text-gray-500 mr-2"></i>100MB free storage</li>
                                            <li><i class="fas fa-wifi text-gray-500 mr-2"></i>Stable internet connection
                                            </li>
                                            <li><i class="fas fa-mobile-alt text-gray-500 mr-2"></i>1024x768 screen
                                                resolution</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Features Tab -->
                    <div id="help-features-tab" class="help-tab-content hidden p-6">
                        <div class="space-y-6">
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-star text-yellow-500 mr-2"></i>
                                    Key Features
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-magic text-purple-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">AI-Assisted Generation</h5>
                                        <p class="text-sm text-gray-600">Generate balanced question papers that respect
                                            your requirements and constraints.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-balance-scale text-blue-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">Quality Validation</h5>
                                        <p class="text-sm text-gray-600">Validate Bloom's levels, difficulty mix, CO
                                            coverage, and total marks automatically.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-layer-group text-green-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">Templates & Presets</h5>
                                        <p class="text-sm text-gray-600">Save and reuse requirement templates for faster
                                            paper setup.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-save text-indigo-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">Saved QPs & Banks</h5>
                                        <p class="text-sm text-gray-600">Manage your generated papers and question banks
                                            with quick export/import.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-user-check text-pink-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">HOD Approval Flow</h5>
                                        <p class="text-sm text-gray-600">Submit for approval and track statuses directly
                                            from the dashboard.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-cog text-gray-700 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">Rich Settings</h5>
                                        <p class="text-sm text-gray-600">Customize theme, fonts, animations,
                                            notifications, and generation defaults.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-file-export text-orange-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">DOCX/PDF Export</h5>
                                        <p class="text-sm text-gray-600">Export final papers in DOCX or PDF; or both,
                                            per your settings.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-moon text-blue-500 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">Light/Dark Mode</h5>
                                        <p class="text-sm text-gray-600">Switch themes or follow your system preference
                                            automatically.</p>
                                    </div>
                                    <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-100">
                                        <i class="fas fa-database text-emerald-600 text-2xl mb-2"></i>
                                        <h5 class="font-semibold text-gray-800">Data Portability</h5>
                                        <p class="text-sm text-gray-600">One-click export/import for papers, banks,
                                            templates, and settings.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-6 border border-gray-100">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                                    Pro Tips
                                </h4>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
                                    <li>Use Settings to set default marks, duration, and difficulty before creating
                                        papers.</li>
                                    <li>Save frequently used requirement sets as templates to speed up future work.</li>
                                    <li>Turn on reduced motion in Settings if you prefer a calmer UI experience.</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Tutorials Tab -->
                    <div id="help-tutorials-tab" class="help-tab-content hidden p-6">
                        <div class="space-y-6">
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-graduation-cap text-indigo-600 mr-2"></i>
                                    Step-by-Step Tutorials
                                </h4>
                                <ol class="list-decimal list-inside space-y-3 text-sm text-gray-700">
                                    <li>
                                        <span class="font-medium text-gray-800">Create and export your first question
                                            paper</span>
                                        <ul class="list-disc list-inside ml-5 space-y-1">
                                            <li>Go to Requirements and fill in basic info, duration and total marks.
                                            </li>
                                            <li>Choose selection strategy and difficulty. Validate requirements.</li>
                                            <li>Generate paper and export as DOCX or PDF.</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <span class="font-medium text-gray-800">Import a question bank and use
                                            templates</span>
                                        <ul class="list-disc list-inside ml-5 space-y-1">
                                            <li>Upload your CSV/Excel/JSON from the dashboard.</li>
                                            <li>Save your requirement set as a template.</li>
                                            <li>Reuse the template for future papers.</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <span class="font-medium text-gray-800">Customize the app appearance</span>
                                        <ul class="list-disc list-inside ml-5 space-y-1">
                                            <li>Open Settings and switch Theme Mode to Light/Dark/Auto.</li>
                                            <li>Adjust Font Size and Sidebar Width.</li>
                                            <li>Tweak colors and motion to your preference.</li>
                                        </ul>
                                    </li>
                                </ol>
                            </div>

                            <div class="bg-white rounded-lg p-6 border border-gray-100">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-video text-red-500 mr-2"></i>
                                    Short How-To Guides
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                                    <div class="p-4 rounded-lg bg-gray-50">
                                        <h5 class="font-semibold text-gray-800 mb-1">Setting generation defaults</h5>
                                        <p>Use Settings → Generation to set default marks, duration, and format.</p>
                                    </div>
                                    <div class="p-4 rounded-lg bg-gray-50">
                                        <h5 class="font-semibold text-gray-800 mb-1">Exporting all data</h5>
                                        <p>Open Settings → Data & Storage and click Export All Data.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FAQ Tab -->
                    <div id="help-faq-tab" class="help-tab-content hidden p-6">
                        <div class="space-y-6">
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-6 flex items-center">
                                    <i class="fas fa-question text-gray-600 mr-2"></i>
                                    Frequently Asked Questions
                                </h4>
                                <div class="space-y-4">
                                    <div class="faq-item bg-white rounded-lg border border-gray-200">
                                        <button
                                            class="faq-question w-full text-left p-4 font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center">
                                            <span>How do I upload questions to the system?</span>
                                            <i class="fas fa-chevron-down text-gray-400"></i>
                                        </button>
                                        <div
                                            class="faq-answer hidden p-4 border-t border-gray-200 text-sm text-gray-600">
                                            <p>You can upload questions in multiple ways:</p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>Use the file upload feature to import Excel (.xlsx), CSV, or JSON
                                                    files</li>
                                                <li>Add questions manually using the question editor</li>
                                                <li>Copy and paste from existing documents</li>
                                            </ul>
                                            <p class="mt-2">Make sure your file includes columns for question text,
                                                marks, difficulty level, and Course Outcomes.</p>
                                        </div>
                                    </div>

                                    <div class="faq-item bg-white rounded-lg border border-gray-200">
                                        <button
                                            class="faq-question w-full text-left p-4 font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center">
                                            <span>What file formats are supported for question import?</span>
                                            <i class="fas fa-chevron-down text-gray-400"></i>
                                        </button>
                                        <div
                                            class="faq-answer hidden p-4 border-t border-gray-200 text-sm text-gray-600">
                                            <p>SmartQPGen supports the following file formats:</p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li><strong>Excel files (.xlsx, .xls)</strong> - Most commonly used
                                                    format</li>
                                                <li><strong>CSV files (.csv)</strong> - Comma-separated values</li>
                                                <li><strong>JSON files (.json)</strong> - For advanced users and data
                                                    exchange</li>
                                                <li><strong>Text files (.txt)</strong> - Simple text format with proper
                                                    delimiters</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="faq-item bg-white rounded-lg border border-gray-200">
                                        <button
                                            class="faq-question w-full text-left p-4 font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center">
                                            <span>How does the AI ensure balanced question papers?</span>
                                            <i class="fas fa-chevron-down text-gray-400"></i>
                                        </button>
                                        <div
                                            class="faq-answer hidden p-4 border-t border-gray-200 text-sm text-gray-600">
                                            <p>Our AI system uses multiple criteria to ensure balance:</p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li><strong>Difficulty Distribution:</strong> Maintains proper ratio of
                                                    easy, medium, and hard questions</li>
                                                <li><strong>Bloom's Taxonomy:</strong> Ensures coverage across all
                                                    cognitive levels</li>
                                                <li><strong>Course Outcomes:</strong> Distributes questions according to
                                                    CO weightings</li>
                                                <li><strong>Topic Coverage:</strong> Avoids clustering questions from
                                                    the same topic</li>
                                                <li><strong>Mark Distribution:</strong> Optimizes marks allocation
                                                    across question types</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="faq-item bg-white rounded-lg border border-gray-200">
                                        <button
                                            class="faq-question w-full text-left p-4 font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center">
                                            <span>Can I customize the question paper format?</span>
                                            <i class="fas fa-chevron-down text-gray-400"></i>
                                        </button>
                                        <div
                                            class="faq-answer hidden p-4 border-t border-gray-200 text-sm text-gray-600">
                                            <p>Yes! SmartQPGen offers extensive customization options:</p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>Custom headers with institution details</li>
                                                <li>Configurable instructions and guidelines</li>
                                                <li>Multiple export formats (DOCX, PDF)</li>
                                                <li>Question numbering and formatting options</li>
                                                <li>Marking scheme inclusion</li>
                                                <li>Custom fonts and styling (in advanced settings)</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="faq-item bg-white rounded-lg border border-gray-200">
                                        <button
                                            class="faq-question w-full text-left p-4 font-medium text-gray-800 hover:bg-gray-50 flex justify-between items-center">
                                            <span>Is my data secure and private?</span>
                                            <i class="fas fa-chevron-down text-gray-400"></i>
                                        </button>
                                        <div
                                            class="faq-answer hidden p-4 border-t border-gray-200 text-sm text-gray-600">
                                            <p>Absolutely! We take data security seriously:</p>
                                            <ul class="list-disc list-inside mt-2 space-y-1">
                                                <li>All data is stored locally in your browser</li>
                                                <li>No question content is sent to external servers</li>
                                                <li>Optional encryption for sensitive data</li>
                                                <li>You have full control over data export and deletion</li>
                                                <li>No tracking or analytics without your consent</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Troubleshooting Tab -->
                    <div id="help-troubleshooting-tab" class="help-tab-content hidden p-6">
                        <div class="space-y-6">
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-wrench text-gray-700 mr-2"></i>
                                    Common Issues & Fixes
                                </h4>
                                <div class="space-y-4 text-sm text-gray-700">
                                    <div>
                                        <h5 class="font-semibold text-gray-800">Nothing happens when generating a paper
                                        </h5>
                                        <ul class="list-disc list-inside ml-5 space-y-1">
                                            <li>Verify you filled all required fields in Requirements.</li>
                                            <li>Check your internet connection.</li>
                                            <li>Open browser console for errors; enable Debug in Settings → Advanced.
                                            </li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-gray-800">Export fails or downloads empty file
                                        </h5>
                                        <ul class="list-disc list-inside ml-5 space-y-1">
                                            <li>Ensure a paper is generated and preview is visible.</li>
                                            <li>Try switching export format in Settings → Generation.</li>
                                            <li>Disable reduced motion temporarily if animations are fully disabled.
                                            </li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h5 class="font-semibold text-gray-800">Settings not applying</h5>
                                        <ul class="list-disc list-inside ml-5 space-y-1">
                                            <li>Toggle a setting and check if a success toast appears.</li>
                                            <li>Try Reset Settings in Settings → Advanced → Reset Options.</li>
                                            <li>Clear site data from browser and reload.</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-6 border border-gray-100">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                                    <i class="fas fa-life-ring text-blue-600 mr-2"></i>
                                    Need more help?
                                </h4>
                                <p class="text-sm text-gray-700">Enable Debug Mode in Settings → Advanced to include
                                    helpful logs and contact your system administrator with screenshots of the error and
                                    steps to reproduce.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- HOD Dashboard Content -->
            <div id="hod-dashboard-content" class="hidden p-6 mt-8 border border-purple-200 rounded-lg bg-purple-50">
                <!-- Header Section -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h3 class="text-2xl font-bold text-purple-800 flex items-center">
                            <i class="fas fa-crown text-purple-600 mr-3"></i>
                            HOD Dashboard
                        </h3>
                        <p class="text-purple-600 mt-1">Head of Department - Question Paper Review & Management</p>
                    </div>
                    <div class="flex space-x-3">
                        <button id="hod-refresh-btn"
                            class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition duration-200">
                            <i class="fas fa-sync-alt mr-2"></i>Refresh
                        </button>
                        <button id="hod-reports-btn"
                            class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200">
                            <i class="fas fa-chart-bar mr-2"></i>Reports
                        </button>
                        <button id="hod-settings-btn"
                            class="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition duration-200">
                            <i class="fas fa-cog mr-2"></i>HOD Settings
                        </button>
                    </div>
                </div>

                <!-- HOD Statistics Overview -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div class="bg-gradient-to-r from-red-500 to-red-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-red-100 text-sm">Pending Review</p>
                                <p class="text-2xl font-bold" id="hod-pending-count">0</p>
                            </div>
                            <i class="fas fa-clock text-2xl text-red-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-green-100 text-sm">Approved</p>
                                <p class="text-2xl font-bold" id="hod-approved-count">0</p>
                            </div>
                            <i class="fas fa-check-circle text-2xl text-green-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-yellow-100 text-sm">Needs Revision</p>
                                <p class="text-2xl font-bold" id="hod-revision-count">0</p>
                            </div>
                            <i class="fas fa-edit text-2xl text-yellow-200"></i>
                        </div>
                    </div>
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-blue-100 text-sm">Total Faculty</p>
                                <p class="text-2xl font-bold" id="hod-faculty-count">0</p>
                            </div>
                            <i class="fas fa-users text-2xl text-blue-200"></i>
                        </div>
                    </div>
                </div>

                <!-- Filter and Search Section -->
                <div class="bg-white p-4 rounded-lg shadow-md mb-6">
                    <div class="flex flex-col md:flex-row gap-4">
                        <div class="flex-1">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Search Question Papers</label>
                            <div class="relative">
                                <input type="text" id="hod-search"
                                    class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                                    placeholder="Search by faculty, subject, or paper name...">
                                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            </div>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status Filter</label>
                            <select id="hod-status-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="all">All Status</option>
                                <option value="pending">Pending Review</option>
                                <option value="approved">Approved</option>
                                <option value="revision">Needs Revision</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Faculty Filter</label>
                            <select id="hod-faculty-filter"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="all">All Faculty</option>
                                <!-- Faculty options will be populated dynamically -->
                            </select>
                        </div>
                        <div class="md:w-48">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Sort by</label>
                            <select id="hod-sort"
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                <option value="date-desc">Newest First</option>
                                <option value="date-asc">Oldest First</option>
                                <option value="priority-desc">High Priority First</option>
                                <option value="faculty-asc">Faculty A-Z</option>
                                <option value="subject-asc">Subject A-Z</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Main Content Area -->
                <div class="bg-white rounded-lg shadow-md">
                    <!-- Tab Navigation -->
                    <div class="border-b border-gray-200">
                        <nav class="flex space-x-8 px-6 py-3">
                            <button
                                class="hod-tab-btn active border-b-2 border-purple-500 text-purple-600 font-medium py-2"
                                data-tab="pending">
                                <i class="fas fa-clock mr-2"></i>Pending Review (<span id="tab-pending-count">0</span>)
                            </button>
                            <button
                                class="hod-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="approved">
                                <i class="fas fa-check-circle mr-2"></i>Approved (<span
                                    id="tab-approved-count">0</span>)
                            </button>
                            <button
                                class="hod-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="revision">
                                <i class="fas fa-edit mr-2"></i>Needs Revision (<span id="tab-revision-count">0</span>)
                            </button>
                            <button
                                class="hod-tab-btn border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium py-2"
                                data-tab="faculty">
                                <i class="fas fa-users mr-2"></i>Faculty Management
                            </button>
                        </nav>
                    </div>

                    <!-- Content List -->
                    <div class="p-6">
                        <!-- Loading State -->
                        <div id="hod-loading" class="hidden text-center py-8">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600">
                            </div>
                            <p class="mt-2 text-gray-600">Loading question papers...</p>
                        </div>

                        <!-- Empty State -->
                        <div id="hod-empty" class="hidden text-center py-12">
                            <div class="mx-auto h-24 w-24 text-gray-400 mb-4">
                                <i class="fas fa-clipboard-list text-6xl"></i>
                            </div>
                            <h3 class="text-lg font-medium text-gray-900 mb-2">No question papers found</h3>
                            <p class="text-gray-500 mb-6">Question papers submitted by faculty will appear here for
                                review</p>
                        </div>

                        <!-- Question Papers List -->
                        <div id="hod-papers-list" class="space-y-4">
                            <!-- Papers will be populated by JavaScript -->
                        </div>

                        <!-- Faculty Management Tab Content -->
                        <div id="hod-faculty-management" class="hidden">
                            <div class="space-y-6">
                                <!-- Faculty Statistics -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="bg-blue-50 rounded-lg p-4">
                                        <h4 class="font-semibold text-blue-900 mb-2">Active Faculty</h4>
                                        <p class="text-2xl font-bold text-blue-600" id="active-faculty-count">0</p>
                                    </div>
                                    <div class="bg-green-50 rounded-lg p-4">
                                        <h4 class="font-semibold text-green-900 mb-2">Papers This Month</h4>
                                        <p class="text-2xl font-bold text-green-600" id="monthly-papers-count">0</p>
                                    </div>
                                    <div class="bg-yellow-50 rounded-lg p-4">
                                        <h4 class="font-semibold text-yellow-900 mb-2">Avg. Review Time</h4>
                                        <p class="text-2xl font-bold text-yellow-600" id="avg-review-time">0h</p>
                                    </div>
                                </div>

                                <!-- Faculty List -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-900 mb-4">Faculty Performance</h4>
                                    <div id="faculty-performance-list" class="space-y-3">
                                        <!-- Faculty performance cards will be populated -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Pagination -->
                        <div id="hod-pagination"
                            class="hidden justify-between items-center mt-6 pt-6 border-t border-gray-200">
                            <div class="text-sm text-gray-700">
                                Showing <span id="hod-pagination-start">1</span> to <span
                                    id="hod-pagination-end">10</span> of <span id="hod-pagination-total">0</span>
                                results
                            </div>
                            <div class="flex space-x-2">
                                <button id="hod-pagination-prev"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-left mr-1"></i>Previous
                                </button>
                                <div id="hod-pagination-numbers" class="flex space-x-1">
                                    <!-- Page numbers will be populated by JavaScript -->
                                </div>
                                <button id="hod-pagination-next"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    Next<i class="fas fa-chevron-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HOD Modal Dialogs -->
                <!-- Review Question Paper Modal -->
                <div id="hod-review-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900" id="review-modal-title">Review Question
                                Paper</h3>
                            <button class="text-gray-400 hover:text-gray-600"
                                onclick="closeHODModal('hod-review-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="flex h-[70vh]">
                            <!-- Question Paper Preview -->
                            <div class="flex-1 p-6 overflow-y-auto border-r border-gray-200">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4">Question Paper Preview</h4>
                                <div id="review-paper-content" class="bg-gray-50 rounded-lg p-4 min-h-96">
                                    <!-- Question paper content will be populated here -->
                                </div>
                            </div>
                            <!-- Review Panel -->
                            <div class="w-96 p-6 bg-gray-50">
                                <h4 class="text-lg font-semibold text-gray-900 mb-4">Review & Comments</h4>

                                <!-- Paper Information -->
                                <div class="bg-white rounded-lg p-4 mb-4">
                                    <h5 class="font-medium text-gray-800 mb-2">Paper Details</h5>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Faculty:</span>
                                            <span class="font-medium" id="review-faculty-name">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Subject:</span>
                                            <span class="font-medium" id="review-subject">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Total Marks:</span>
                                            <span class="font-medium" id="review-total-marks">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Duration:</span>
                                            <span class="font-medium" id="review-duration">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Questions:</span>
                                            <span class="font-medium" id="review-question-count">-</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600">Submitted:</span>
                                            <span class="font-medium" id="review-submit-date">-</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Quality Checks -->
                                <div class="bg-white rounded-lg p-4 mb-4">
                                    <h5 class="font-medium text-gray-800 mb-2">Quality Checks</h5>
                                    <div class="space-y-2">
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Bloom's Taxonomy</span>
                                            <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-800"
                                                id="blooms-check">✓ Balanced</span>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">CO Coverage</span>
                                            <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-800"
                                                id="co-check">✓ Complete</span>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Difficulty Balance</span>
                                            <span class="text-xs px-2 py-1 rounded-full bg-yellow-100 text-yellow-800"
                                                id="difficulty-check">⚠ Review</span>
                                        </div>
                                        <div class="flex items-center justify-between">
                                            <span class="text-sm text-gray-600">Duplicates</span>
                                            <span class="text-xs px-2 py-1 rounded-full bg-green-100 text-green-800"
                                                id="duplicate-check">✓ None</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Comments Section -->
                                <div class="bg-white rounded-lg p-4 mb-4">
                                    <h5 class="font-medium text-gray-800 mb-2">HOD Comments</h5>
                                    <textarea id="hod-comments"
                                        class="w-full h-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"
                                        placeholder="Add your review comments here..."></textarea>
                                </div>

                                <!-- Priority Setting -->
                                <div class="bg-white rounded-lg p-4 mb-4">
                                    <h5 class="font-medium text-gray-800 mb-2">Priority Level</h5>
                                    <select id="review-priority"
                                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm">
                                        <option value="low">Low Priority</option>
                                        <option value="medium" selected>Medium Priority</option>
                                        <option value="high">High Priority</option>
                                        <option value="urgent">Urgent</option>
                                    </select>
                                </div>

                                <!-- Action Buttons -->
                                <div class="space-y-2">
                                    <button id="approve-paper-btn"
                                        class="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition duration-200">
                                        <i class="fas fa-check mr-2"></i>Approve Paper
                                    </button>
                                    <button id="request-revision-btn"
                                        class="w-full px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition duration-200">
                                        <i class="fas fa-edit mr-2"></i>Request Revision
                                    </button>
                                    <button id="reject-paper-btn"
                                        class="w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition duration-200">
                                        <i class="fas fa-times mr-2"></i>Reject Paper
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Faculty Management Modal -->
                <div id="hod-faculty-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900">Faculty Management</h3>
                            <button class="text-gray-400 hover:text-gray-600"
                                onclick="closeHODModal('hod-faculty-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6 overflow-y-auto max-h-[60vh]">
                            <div class="space-y-6">
                                <!-- Add Faculty Form -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-900 mb-4">Add New Faculty</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Faculty
                                                Name</label>
                                            <input type="text" id="new-faculty-name"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                            <input type="email" id="new-faculty-email"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-700 mb-2">Department</label>
                                            <input type="text" id="new-faculty-dept"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                        </div>
                                        <div>
                                            <label
                                                class="block text-sm font-medium text-gray-700 mb-2">Specialization</label>
                                            <input type="text" id="new-faculty-spec"
                                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500">
                                        </div>
                                    </div>
                                    <button id="add-faculty-btn"
                                        class="mt-4 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition duration-200">
                                        <i class="fas fa-plus mr-2"></i>Add Faculty
                                    </button>
                                </div>

                                <!-- Faculty List -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <h4 class="font-semibold text-gray-900 mb-4">Current Faculty</h4>
                                    <div id="faculty-list" class="space-y-3">
                                        <!-- Faculty cards will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Modal -->
                <div id="hod-reports-modal"
                    class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
                    <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[80vh] overflow-hidden">
                        <div class="flex justify-between items-center p-6 border-b border-gray-200">
                            <h3 class="text-xl font-semibold text-gray-900">Department Reports</h3>
                            <button class="text-gray-400 hover:text-gray-600"
                                onclick="closeHODModal('hod-reports-modal')">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <div class="p-6 overflow-y-auto max-h-[60vh]">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- Report Cards -->
                                <div class="bg-blue-50 rounded-lg p-4 cursor-pointer hover:bg-blue-100 transition duration-200"
                                    onclick="generateReport('faculty-performance')">
                                    <div class="flex items-center">
                                        <i class="fas fa-chart-line text-blue-600 text-2xl mr-4"></i>
                                        <div>
                                            <h4 class="font-semibold text-blue-900">Faculty Performance</h4>
                                            <p class="text-sm text-blue-700">Detailed performance analysis</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-green-50 rounded-lg p-4 cursor-pointer hover:bg-green-100 transition duration-200"
                                    onclick="generateReport('paper-analytics')">
                                    <div class="flex items-center">
                                        <i class="fas fa-file-chart text-green-600 text-2xl mr-4"></i>
                                        <div>
                                            <h4 class="font-semibold text-green-900">Paper Analytics</h4>
                                            <p class="text-sm text-green-700">Question paper statistics</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-yellow-50 rounded-lg p-4 cursor-pointer hover:bg-yellow-100 transition duration-200"
                                    onclick="generateReport('quality-metrics')">
                                    <div class="flex items-center">
                                        <i class="fas fa-award text-yellow-600 text-2xl mr-4"></i>
                                        <div>
                                            <h4 class="font-semibold text-yellow-900">Quality Metrics</h4>
                                            <p class="text-sm text-yellow-700">Quality assessment reports</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-purple-50 rounded-lg p-4 cursor-pointer hover:bg-purple-100 transition duration-200"
                                    onclick="generateReport('department-summary')">
                                    <div class="flex items-center">
                                        <i class="fas fa-building text-purple-600 text-2xl mr-4"></i>
                                        <div>
                                            <h4 class="font-semibold text-purple-900">Department Summary</h4>
                                            <p class="text-sm text-purple-700">Overall department overview</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Approval Management Section -->
                <div class="mt-8">
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h4 class="text-xl font-semibold text-gray-800">
                                <i class="fas fa-clipboard-check mr-2 text-purple-600"></i>
                                Pending Approvals
                            </h4>
                            <div class="flex space-x-2">
                                <button id="refresh-approvals-btn"
                                    class="px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                    <i class="fas fa-sync-alt mr-1"></i>Refresh
                                </button>
                                <select id="approval-filter"
                                    class="px-3 py-1 border border-gray-300 rounded-md text-sm">
                                    <option value="all">All Status</option>
                                    <option value="pending_approval">Pending Review</option>
                                    <option value="revision_requested">Needs Revision</option>
                                    <option value="approved">Approved</option>
                                </select>
                            </div>
                        </div>

                        <!-- Approvals List -->
                        <div id="approvals-list" class="space-y-4">
                            <!-- Approvals will be populated here -->
                        </div>

                        <!-- No approvals message -->
                        <div id="no-approvals-message" class="text-center py-8 text-gray-500 hidden">
                            <i class="fas fa-inbox text-4xl mb-4"></i>
                            <p>No pending approvals found</p>
                        </div>
                    </div>
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Profile Settings</h3>
                    <div class="mt-2 px-7 py-3">
                        <form id="profile-settings-form">
                            <div class="mb-4 text-left">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="profile-name">
                                    Display Name
                                </label>
                                <input
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                    id="profile-name" type="text" placeholder="Your Name">
                            </div>
                            <div class="mb-4 text-left">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="profile-email">
                                    Email
                                </label>
                                <input
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100"
                                    id="profile-email" type="text" readonly>
                            </div>
                            <div class="mb-4 text-left">
                                <label class="block text-gray-700 text-sm font-bold mb-2" for="profile-dept">
                                    Department
                                </label>
                                <input
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-gray-100"
                                    id="profile-dept" type="text" readonly>
                            </div>
                            <div class="items-center px-4 py-3">
                                <button id="save-profile-btn"
                                    class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300">
                                    Save Changes
                                </button>
                                <button id="close-profile-modal-btn" type="button"
                                    class="mt-3 px-4 py-2 bg-gray-300 text-gray-700 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300">
                                    Close
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
    </div>

    <!-- Account Settings Modal -->
    <div id="account-settings-modal" class="modal fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full"
        style="display: none; z-index: 9999;">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3 text-center">
                <h3 class="text-lg leading-6 font-medium text-gray-900">Account Settings</h3>
                <div class="mt-2 px-7 py-3">
                    <form id="account-settings-form">
                        <div class="mb-4 text-left">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="new-password">
                                New Password
                            </label>
                            <input
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="new-password" type="password" placeholder="New Password">
                        </div>
                        <div class="mb-4 text-left">
                            <label class="block text-gray-700 text-sm font-bold mb-2" for="confirm-password">
                                Confirm Password
                            </label>
                            <input
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
                                id="confirm-password" type="password" placeholder="Confirm Password">
                        </div>
                        <div class="items-center px-4 py-3">
                            <button id="update-password-btn"
                                class="px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-300">
                                Update Password
                            </button>
                            <button id="close-account-modal-btn" type="button"
                                class="mt-3 px-4 py-2 bg-gray-300 text-gray-700 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300">
                                Close
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="question-modal" class="modal">
        <div class="modal-content bg-white p-6 rounded-lg shadow-xl">
            <span class="close-button text-gray-500 hover:text-gray-800">&times;</span>
            <h3 id="modal-title" class="text-xl font-semibold mb-4">Add New Question</h3>
            <form id="question-form" class="space-y-4">
                <div>
                    <label for="question-text-input" class="block text-sm font-medium text-gray-700">Question
                        Text:</label>
                    <textarea id="question-text-input" rows="4"
                        class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                        required></textarea>
                </div>
                <div class="grid grid-cols-4 gap-4">
                    <div>
                        <label for="co-input" class="block text-sm font-medium text-gray-700">CO:</label>
                        <input type="text" id="co-input"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="blooms-level-input" class="block text-sm font-medium text-gray-700">Level
                            (L1-L6):</label>
                        <input type="text" id="blooms-level-input"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                    <div>
                        <label for="marks-input" class="block text-sm font-medium text-gray-700">Marks:</label>
                        <input type="number" id="marks-input" min="0" max="100"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                            required>
                    </div>
                    <div>
                        <label for="module-input" class="block text-sm font-medium text-gray-700">Module:</label>
                        <select id="module-input"
                            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="1">Module 1</option>
                            <option value="2">Module 2</option>
                            <option value="3">Module 3</option>
                            <option value="4">Module 4</option>
                            <option value="5">Module 5</option>
                        </select>
                    </div>
                </div>
                <button type="submit"
                    class="w-full px-4 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition duration-200">
                    Save Question
                </button>
            </form>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>

    <!-- Load Template Modal -->
    <div id="load-template-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Load Requirements Template</h3>
                <button id="close-template-modal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="templates-list" class="space-y-2 max-h-96 overflow-y-auto">
                <!-- Templates will be populated here -->
                <p class="text-gray-500 text-center py-4">Loading templates...</p>
            </div>
            <div class="mt-4 flex justify-end">
                <button id="cancel-load-template"
                    class="px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition duration-200">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/requirements_form.js') }}"></script>
</body>

</html>